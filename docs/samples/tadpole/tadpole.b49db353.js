parcelRequire=function(e,r,n,t){var i="function"==typeof parcelRequire&&parcelRequire,o="function"==typeof require&&require;function u(n,t){if(!r[n]){if(!e[n]){var f="function"==typeof parcelRequire&&parcelRequire;if(!t&&f)return f(n,!0);if(i)return i(n,!0);if(o&&"string"==typeof n)return o(n);var c=new Error("Cannot find module '"+n+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[n][1][r]||r},p.cache={};var l=r[n]=new u.Module(n);e[n][0].call(l.exports,p,l,l.exports,this)}return r[n].exports;function p(e){return u(p.resolve(e))}}u.isParcelRequire=!0,u.Module=function(e){this.id=e,this.bundle=u,this.exports={}},u.modules=e,u.cache=r,u.parent=i,u.register=function(r,n){e[r]=[function(e,r){r.exports=n},{}]};for(var f=0;f<n.length;f++)u(n[f]);if(n.length){var c=u(n[n.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=c:"function"==typeof define&&define.amd?define(function(){return c}):t&&(this[t]=c)}return u}({"qYDV":[function(require,module,exports) {
"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}Object.defineProperty(exports,"__esModule",{value:!0});var n=function(){function e(){t(this,e),this.pool=exports.pool,this.isAlive=!0,this.ticks=0,this.updaterPool=new o,this.priority=1}return i(e,[{key:"remove",value:function(){this.isAlive&&(null!=this.onRemove&&this.onRemove(),this.isAlive=!1)}},{key:"addUpdater",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=new s(t,e,this);return this.updaterPool.add(i),i}},{key:"setPool",value:function(t){this.pool=t}},{key:"setPriority",value:function(t){this.priority=t,this.pool.enablePriority()}},{key:"init",value:function(t){this.func=t;for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];t.apply(void 0,[this].concat(i)),this.pool.add(this)}},{key:"update",value:function(){this.updaterPool.update(),this.ticks++}}]),e}();exports.Actor=n;var s=function(){function e(i,n,s){t(this,e),this.updateFunc=i,this.interval=n,this.actor=s,this.isAlive=!0,this.ticks=0,this.intervalTicks=0,this.func=i}return i(e,[{key:"remove",value:function(){this.isAlive=!1}},{key:"setInterval",value:function(t){this.interval=t}},{key:"update",value:function(){this.intervalTicks--,this.intervalTicks<=0&&(this.updateFunc(this,this.actor),this.intervalTicks=this.interval),this.ticks++}}]),e}();exports.Updater=s;var o=function(){function e(){t(this,e),this.instances=[],this.isRemovingAllInstances=!1,this.isPriorityEnabled=!1}return i(e,[{key:"add",value:function(t){this.instances.push(t)}},{key:"update",value:function(){this.isPriorityEnabled&&(this.instances=p(this.instances,function(t,e){return e.priority-t.priority}));for(var t=0;t<this.instances.length;){var e=this.instances[t];if(e.isAlive&&e.update(),this.isRemovingAllInstances){this.isRemovingAllInstances=!1;break}e.isAlive?t++:this.instances.splice(t,1)}}},{key:"get",value:function(t){return null==t?this.instances.filter(function(t){return t.isAlive}):this.instances.filter(function(e){return e.func===t&&e.isAlive})}},{key:"removeAll",value:function(){this.instances.forEach(function(t){t.remove()}),this.instances=[],this.isRemovingAllInstances=!0}},{key:"enablePriority",value:function(){this.isPriorityEnabled=!0}}]),e}();exports.Pool=o,exports.pool=new o,exports.updaterPool=new o;var r=n;function a(t){for(var e=new r,i=arguments.length,n=new Array(i>1?i-1:0),s=1;s<i;s++)n[s-1]=arguments[s];return e.init.apply(e,[t].concat(n)),e}function u(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=new s(t,e);return exports.updaterPool.add(i),i}function l(){exports.pool.update(),exports.updaterPool.update()}function c(){exports.pool.removeAll(),exports.updaterPool.removeAll()}function h(t){r=t}function p(t,e){var i=t.map(function(t,e){return[t,e]});return i.sort(function(t,i){var n=e(t[0],i[0]);return 0!==n?n:t[1]-i[1]}),i.map(function(t){return t[0]})}exports.spawn=a,exports.addUpdater=u,exports.update=l,exports.reset=c,exports.setActorClass=h;
},{}],"Omv8":[function(require,module,exports) {
"use strict";function t(){null==exports.canvas&&(exports.canvas=document.createElement("canvas"),exports.canvas.width=exports.canvas.height=exports.size*exports.pixelRatio,exports.context=exports.canvas.getContext("2d"),document.body.appendChild(exports.canvas))}function e(){o(0,0,exports.size,exports.size,exports.background)}function o(t,e,o,s){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"black";exports.context.fillStyle=r,exports.context.fillRect(Math.floor(t*exports.pixelRatio),Math.floor(e*exports.pixelRatio),Math.floor(o*exports.pixelRatio),Math.floor(s*exports.pixelRatio))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.size=100,exports.padding=0,exports.pixelRatio=2,exports.init=t,exports.background="#ddd",exports.clear=e,exports.fillRect=o;
},{}],"pR4u":[function(require,module,exports) {
"use strict";function r(r){return e(r)||n(r)||t()}function t(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function n(r){if(Symbol.iterator in Object(r)||"[object Arguments]"===Object.prototype.toString.call(r))return Array.from(r)}function e(r){if(Array.isArray(r)){for(var t=0,n=new Array(r.length);t<r.length;t++)n[t]=r[t];return n}}function o(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.max(t,Math.min(r,n))}function u(r,t,n){var e=n-t,o=r-t;if(o>=0)return o%e+t;var u=e+o%e+t;return u>=n&&(u-=e),u}function a(r,t,n){return t<=r&&r<=n}function i(t){return r(Array(t).keys())}function c(r,t){null==t&&(t=function(r,t){return r-t});var n=r.map(function(r,t){return[r,t]});return n.sort(function(r,n){var e=t(r[0],n[0]);return 0!==e?e:r[1]-n[1]}),n.map(function(r){return r[0]})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.clamp=o,exports.wrap=u,exports.isInRange=a,exports.range=i,exports.stableSort=c;
},{}],"HIZ7":[function(require,module,exports) {
"use strict";function t(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function i(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function e(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}Object.defineProperty(exports,"__esModule",{value:!0});var n=require("./math"),s=function(){function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1?arguments[1]:void 0;t(this,i),this.x=0,this.y=0,this.set(e,n)}return e(i,[{key:"set",value:function(t,e){return t instanceof i?(this.x=t.x,this.y=t.y,this):(this.x=t,this.y=null==e?t:e,this)}},{key:"add",value:function(t){return this.x+=t.x,this.y+=t.y,this}},{key:"sub",value:function(t){return this.x-=t.x,this.y-=t.y,this}},{key:"mul",value:function(t){return this.x*=t,this.y*=t,this}},{key:"div",value:function(t){return this.x/=t,this.y/=t,this}},{key:"clamp",value:function(t,i,e,s){return this.x=n.clamp(this.x,t,i),this.y=n.clamp(this.y,e,s),this}},{key:"wrap",value:function(t,i,e,s){return this.x=n.wrap(this.x,t,i),this.y=n.wrap(this.y,e,s),this}},{key:"addAngle",value:function(t,i){return this.x+=Math.cos(t)*i,this.y+=Math.sin(t)*i,this}},{key:"swapXy",value:function(){var t=this.x;return this.x=this.y,this.y=t,this}},{key:"normalize",value:function(){return this.div(this.length),this}},{key:"rotate",value:function(t){if(0===t)return this;var i=this.x;return this.x=i*Math.cos(t)-this.y*Math.sin(t),this.y=i*Math.sin(t)+this.y*Math.cos(t),this}},{key:"getAngle",value:function(t){return null==t?Math.atan2(this.y,this.x):Math.atan2(t.y-this.y,t.x-this.x)}},{key:"distanceTo",value:function(t){var i=this.x-t.x,e=this.y-t.y;return Math.sqrt(i*i+e*e)}},{key:"isInRect",value:function(t,i,e,s){return n.isInRange(this.x,t,t+e)&&n.isInRange(this.y,i,i+s)}},{key:"length",get:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}}]),i}();exports.default=s;
},{"./math":"pR4u"}],"N8kj":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function s(t,e,s){return e&&i(t.prototype,e),s&&i(t,s),t}function o(e,i){return!i||"object"!==t(i)&&"function"!=typeof i?r(e):i}function r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function n(t,e,i){return(n="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var s=a(t,e);if(s){var o=Object.getOwnPropertyDescriptor(s,e);return o.get?o.get.call(i):o.value}})(t,e,i||t)}function a(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var c=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e},h=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var p=c(require("../../..")),d=c(require("./screen")),v=h(require("../vector")),y=require("../math"),g=.5,b=function(t){function i(){var t;return e(this,i),(t=o(this,u(i).apply(this,arguments))).pos=new v.default,t.prevPos=new v.default,t.vel=new v.default,t.speed=0,t.angle=0,t.speedVel=new v.default,t.rects=[],t.stepBackVector=new v.default,t}return l(i,p.Actor),s(i,[{key:"setRect",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=i.color,o=void 0===s?"black":s,r=i.offset,n=void 0===r?{x:0,y:0}:r;return this.addRect(new O(t,e,{color:o,offset:n}))}},{key:"addRect",value:function(t){return this.rects.push(t),t}},{key:"addRectWithSquares",value:function(){var t,e,i=this,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.color,a=void 0===n?"black":n,u=r.offset,l=void 0===u?{x:0,y:0}:u,f=0,c=0,h=0,p=0;s>o?(t=Math.ceil(s/o),f=-s/2+(e=o)/2,h=(s-e)/(t-1)):(t=Math.ceil(o/s),c=-o/2+(e=s)/2,p=(o-e)/(t-1)),y.range(t).forEach(function(){i.addRect(new O(e,e,{color:a,offset:{x:f+(l.x||0),y:c+(l.y||0)}})),f+=h,c+=p})}},{key:"clearRects",value:function(){this.rects=[]}},{key:"testColliding",value:function(t){return this.rects.some(function(e){return t.rects.some(function(t){return e.testColliding(t)})})}},{key:"getCollidings",value:function(t){var e=this;return this.pool.get(t).filter(function(t){return e.testColliding(t)})}},{key:"getColliding",value:function(t){var e=this.pool.get(t),i=!0,s=!1,o=void 0;try{for(var r,n=e[Symbol.iterator]();!(i=(r=n.next()).done);i=!0){var a=r.value;if(this.testColliding(a))return a}}catch(u){s=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(s)throw o}}return!1}},{key:"getNearest",value:function(t){var e=this.pool.get(t),i=999,s=!1,o=!0,r=!1,n=void 0;try{for(var a,u=e[Symbol.iterator]();!(o=(a=u.next()).done);o=!0){var l=a.value,f=this.pos.distanceTo(l.pos);f<i&&(i=f,s=l)}}catch(c){r=!0,n=c}finally{try{o||null==u.return||u.return()}finally{if(r)throw n}}return s}},{key:"stepBack",value:function(t,e){var i=this;null==e?this.stepBackVector.set(this.prevPos).sub(this.pos):this.stepBackVector.set(e),this.stepBackVector.normalize().div(2);for(var s=!1,o=0;o<99;o++){if(this.rects.forEach(function(t){t.updatePos(i.pos)}),t instanceof Function){if(!this.getColliding(t))break}else if(!this.testColliding(t))break;s=!0,this.pos.add(this.stepBackVector)}return s}},{key:"update",value:function(){this.prevPos.set(this.pos),this.pos.add(this.vel),this.speedVel.set(this.speed,0).rotate(this.angle),this.pos.add(this.speedVel),this.updateRects(),n(u(i.prototype),"update",this).call(this),(this.pos.x<-d.size*g||this.pos.x>d.size*(1+g)||this.pos.y<-d.size*g||this.pos.y>d.size*(1+g))&&this.remove()}},{key:"updateRects",value:function(){var t=this;this.rects.forEach(function(e){e.update(t.pos,t.angle)})}}]),i}();exports.Actor=b;var O=function(){function t(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=o.color,n=void 0===r?"black":r,a=o.offset,u=void 0===a?{x:0,y:0}:a,l=o.springRatio;e(this,t),this.pos=new v.default,this.size=new v.default(5),this.color="black",this.offset=new v.default,this.springAnchor=new v.default,this.vel=new v.default,this.currentOffset=new v.default,this.partOffset=new v.default,this.springOffset=new v.default,this.isFirstFrame=!0,this.size.set(i,s),this.color=n,this.offset.set(u.x||0,u.y||0),this.springRatio=l}return s(t,[{key:"testColliding",value:function(t){var e=Math.abs(this.pos.x-t.pos.x),i=Math.abs(this.pos.y-t.pos.y);return e<(this.size.x+t.size.x)/2&&i<(this.size.y+t.size.y)/2}},{key:"update",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;null!=this.springRatio?(this.isFirstFrame&&(this.isFirstFrame=!1,this.pos.set(this.offset).rotate(e).add(t)),this.partOffset.set(this.offset).rotate(e).add(t).sub(this.pos),this.springOffset.set(this.partOffset).mul(this.springRatio),this.partOffset.mul(1-this.springRatio),this.pos.add(this.partOffset),this.vel.add(this.springOffset.mul(.1)),this.vel.mul(.9),this.pos.add(this.vel),this.currentOffset.set(this.pos).sub(t)):(this.currentOffset.set(this.offset).rotate(e),this.updatePos(t)),d.fillRect(this.pos.x-this.size.x/2,this.pos.y-this.size.y/2,this.size.x,this.size.y,this.color)}},{key:"updatePos",value:function(t){this.pos.set(t),this.pos.add(this.currentOffset)}}]),t}();exports.Rect=O;
},{"../../..":"qYDV","./screen":"Omv8","../vector":"HIZ7","../math":"pR4u"}],"YgJ8":[function(require,module,exports) {
var define;
var e;!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof e&&e.amd?e([],n):"object"==typeof exports?exports.sss=n():t.sss=n()}(window,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t){var n;!function(e){"use strict";String.fromCharCode;var t=2*+Math.PI,n=16,r=1,a=Math.sin,o=Math.pow,i=Math.abs;e.SampleRate=0,e.Sec=0,e.SetSampleRate=function(t){e.SampleRate=0|t,e.Sec=0|t},e.SetSampleRate(void 0!==u?(new u).sampleRate:44100),e.Sound=function(t){var n=new h(t,e.DefaultModules),r=b(n.getSamplesLeft());return n.generate(r),g(r)},e.Sounds=function(t,n,r){var a={},o={};o._audio=a;var i=[];P(t,function(e,t){o[t]=function(){void 0!==a[t]&&(a[t].currentTime=0,a[t].play())},i.push(t)});var u=0,l=i.length;return function o(){if(0!=i.length){var s=i.shift();a[s]=e.Sound(t[s]),r&&r(s,++u,l),window.setTimeout(o,30)}else n&&n(sounds)}(),o},e.SoundsImmediate=function(t){var n={},r={};return r._audio=n,P(t,function(t,a){n[a]=e.Sound(t),r[a]=function(){void 0!==n[a]&&(n[a].currentTime=0,n[a].play())}}),r};var u=window.AudioContext||window.webkitAudioContext;void 0!==u?(e.Node=function(t,n,r,a,o){var i=t.createScriptProcessor(a,0,1),u=new h(n,r||e.DefaultModules);return i.onaudioprocess=function(e){var t=e.outputBuffer.getChannelData(0);u.generate(t),!o&&u.finished&&setTimeout(function(){i.disconnect()},30)},i},e.Live=function(t,n,r){r=r||2048;var a={},o=new u,i=o.createGain();function l(e,t){var n=o.createBufferSource();if(n.buffer=e,null!=t&&null!=n.playbackRate){const e=Math.pow(2,1/12);n.playbackRate.value=Math.pow(e,t/100)}return n.start=n.start||n.noteOn,n}return i.connect(o.destination),a._context=o,a._volume=i,P(t,function(t,u){a[u]=function(){e.Node(o,t,n,r).connect(i)}}),a._close=function(){o.close()},a._play=function(t){e.Node(o,t,n,r).connect(i)},a._createBuffer=function(t){var n=new h(t,e.DefaultModules),r=b(n.getSamplesLeft());return n.generate(r),a._createBufferFromBlock(r)},a._createEmptyBuffer=function(){return a._createBufferFromBlock([0])},a._createBufferFromBlock=function(t){var n=o.createBuffer(1,t.length,e.SampleRate);return n.getChannelData(0).set(t),n},a._playBuffer=function(e,t,n){var r=l(e,n);r.connect(i),r.start(t)},a._playBufferAndConnect=function(e,t,n,r){var a=l(e,r);a.connect(n),n.connect(i),a.start(t)},a._createGain=function(){return o.createGain()},a}):e.Live=function(e,t,n){return null},e.Module={},e.G={};var l=e.stage={PhaseSpeed:0,PhaseSpeedMod:10,Generator:20,SampleMod:30,Volume:40};function s(e,t){return e.stage-t.stage}function c(e,t){for(var n=0;n<t.length;n+=1){var r=t[n],a=e[r.name]||{};P(r.params,function(e,t){void 0===a[t]&&(a[t]=e.D)}),e[r.name]=a}}function h(t,n){t=t||{},n=n||e.DefaultModules,t="function"==typeof t?t():JSON.parse(JSON.stringify(t)),this.finished=!1,this.state={SampleRate:t.SampleRate||e.SampleRate},(n=n.slice()).sort(s),this.modules=n,c(t,n);for(var r=0;r<this.modules.length;r+=1){var a=this.modules[r];this.modules[r].setup(this.state,t[a.name])}}function f(){return P(e.Module,function(){return{}})}function p(e){for(var t in e)0==F(e[t]).length&&delete e[t]}function d(e){return new Function("$","block","var TAU = Math.PI * 2;\nvar sample;\nvar phase = +$.generatorPhase,\n\tA = +$.generatorA, ASlide = +$.generatorASlide,\n\tB = +$.generatorB, BSlide = +$.generatorBSlide;\n\nfor(var i = 0; i < block.length; i++){\n\tvar phaseSpeed = block[i];\n\tphase += phaseSpeed;\n\tif(phase > TAU){ phase -= TAU };\n\tA += ASlide; B += BSlide;\n   A = A < 0 ? 0 : A > 1 ? 1 : A;\n   B = B < 0 ? 0 : B > 1 ? 1 : B;\n"+e+"\tblock[i] = sample;\n}\n\n$.generatorPhase = phase;\n$.generatorA = A;\n$.generatorB = B;\nreturn block.length;\n")}function g(t){"undefined"!=typeof Float32Array&&S(t instanceof Float32Array,"data must be an Float32Array");var a=r*n>>3,o=e.SampleRate*a,i=function(e){if("undefined"==typeof Uint8Array)for(var t=new Array(e),n=0;n<t.length;n++)t[n]=0;return new Uint8Array(e)}(44+2*t.length),u=0;function l(e){for(var t=0;t<e.length;t+=1)i[u]=e.charCodeAt(t),u++}function s(e,t){t<=0||(i[u]=255&e,u++,s(e>>8,t-1))}return l("RIFF"),s(36+2*t.length,4),l("WAVEfmt "),s(16,4),s(1,2),s(r,2),s(e.SampleRate,4),s(o,4),s(a,2),s(n,2),l("data"),s(2*t.length,4),m(i.subarray(u),t),new Audio("data:audio/wav;base64,"+function(e){for(var t="",n=0;n<e.length;n+=32768){var r=Math.min(n+32768,e.length);t+=String.fromCharCode.apply(null,e.subarray(n,r))}return btoa(t)}(i))}function m(e,t){S(e.length/2==t.length,"the target buffer must be twice as large as the iinput");for(var n=0,r=0;r<t.length;r++){var a=32767*+t[r]|0;a=a<-32768?-32768:32767<a?32767:a,a+=a<0?65536:0,e[n]=255&a,e[++n]=a>>8,n++}}function S(e,t){if(!e)throw new Error(t)}function y(e,t,n){return n=+n,(e=+e)<(t=+t)?+t:e>n?+n:+e}function v(e){return(e=+e)<0?0:e>1?1:+e}function P(e,t){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=t(e[r],r));return n}function M(e,t){var n=D();return void 0!==e&&(n*=e),void 0!==t&&(n+=t),n}function L(e){return e[e.length*D()|0]}function F(e){var t=[];for(var n in e)t.push(n);return t}function b(e){if("undefined"==typeof Float32Array)for(var t=new Array(e),n=0;n<t.length;n++)t[n]=0;return new Float32Array(e)}e.InitDefaultParams=c,e.Processor=h,h.prototype={generate:function(e){for(var t=0;t<e.length;t+=1)e[t]=0;if(!this.finished){var n=this.state,r=0|e.length;for(t=0;t<this.modules.length;t+=1){var a=0|this.modules[t].process(n,e.subarray(0,r));r=Math.min(r,a)}for(r<e.length&&(this.finished=!0),t=r;t<e.length;t++)e[t]=0}},getSamplesLeft:function(){for(var e=0,t=0;t<this.state.envelopes.length;t+=1)e+=this.state.envelopes[t].N;return 0===e&&(e=3*this.state.SampleRate),e}},e.Module.Frequency={name:"Frequency",params:{Start:{L:30,H:1800,D:440},Min:{L:30,H:1800,D:30},Max:{L:30,H:1800,D:1800},Slide:{L:-1,H:1,D:0},DeltaSlide:{L:-1,H:1,D:0},RepeatSpeed:{L:0,H:3,D:0},ChangeAmount:{L:-12,H:12,D:0},ChangeSpeed:{L:0,H:1,D:0}},stage:l.PhaseSpeed,setup:function(e,n){var r=e.SampleRate;e.phaseParams=n,e.phaseSpeed=n.Start*t/r,e.phaseSpeedMax=n.Max*t/r,e.phaseSpeedMin=n.Min*t/r,e.phaseSpeedMin=Math.min(e.phaseSpeedMin,e.phaseSpeed),e.phaseSpeedMax=Math.max(e.phaseSpeedMax,e.phaseSpeed),e.phaseSlide=1+64*o(n.Slide,3)/r,e.phaseDeltaSlide=o(n.DeltaSlide,3)/(1e3*r),e.repeatTime=0,e.repeatLimit=1/0,n.RepeatSpeed>0&&(e.repeatLimit=n.RepeatSpeed*r),e.arpeggiatorTime=0,e.arpeggiatorLimit=n.ChangeSpeed*r,0==n.ChangeAmount&&(e.arpeggiatorLimit=1/0),e.arpeggiatorMod=1+n.ChangeAmount/12},process:function(e,t){for(var n=+e.phaseSpeed,r=+e.phaseSpeedMin,a=+e.phaseSpeedMax,o=+e.phaseSlide,i=+e.phaseDeltaSlide,u=e.repeatTime,l=e.repeatLimit,s=e.arpeggiatorTime,c=e.arpeggiatorLimit,h=e.arpeggiatorMod,f=0;f<t.length;f++){if(n=(n*=o+=i)<r?r:n>a?a:n,u>l)return this.setup(e,e.phaseParams),f+this.process(e,t.subarray(f))-1;u++,s>c&&(n*=h,s=0,c=1/0),s++,t[f]+=n}return e.repeatTime=u,e.arpeggiatorTime=s,e.arpeggiatorLimit=c,e.phaseSpeed=n,e.phaseSlide=o,t.length}},e.Module.Vibrato={name:"Vibrato",params:{Depth:{L:0,H:1,D:0},DepthSlide:{L:-1,H:1,D:0},Frequency:{L:.01,H:48,D:0},FrequencySlide:{L:-1,H:1,D:0}},stage:l.PhaseSpeedMod,setup:function(e,n){var r=e.SampleRate;e.vibratoPhase=0,e.vibratoDepth=n.Depth,e.vibratoPhaseSpeed=n.Frequency*t/r,e.vibratoPhaseSpeedSlide=1+3*o(n.FrequencySlide,3)/r,e.vibratoDepthSlide=n.DepthSlide/r},process:function(e,n){var r=+e.vibratoPhase,o=+e.vibratoDepth,i=+e.vibratoPhaseSpeed,u=+e.vibratoPhaseSpeedSlide,l=+e.vibratoDepthSlide;if(0==o&&l<=0)return n.length;for(var s=0;s<n.length;s++)(r+=i)>t&&(r-=t),n[s]+=n[s]*a(r)*o,i*=u,o=v(o+=l);return e.vibratoPhase=r,e.vibratoDepth=o,e.vibratoPhaseSpeed=i,n.length}},e.Module.Generator={name:"Generator",params:{Func:{C:e.G,D:"square"},A:{L:0,H:1,D:0},B:{L:0,H:1,D:0},ASlide:{L:-1,H:1,D:0},BSlide:{L:-1,H:1,D:0}},stage:l.Generator,setup:function(t,n){t.generatorPhase=0,"string"==typeof n.Func?t.generator=e.G[n.Func]:t.generator=n.Func,"object"==typeof t.generator&&(t.generator=t.generator.create()),S("function"==typeof t.generator,"generator must be a function"),t.generatorA=n.A,t.generatorASlide=n.ASlide,t.generatorB=n.B,t.generatorBSlide=n.BSlide},process:function(e,t){return e.generator(e,t)}},e.Module.Guitar={name:"Guitar",params:{A:{L:0,H:1,D:1},B:{L:0,H:1,D:1},C:{L:0,H:1,D:1}},stage:l.Generator,setup:function(e,t){e.guitarA=t.A,e.guitarB=t.B,e.guitarC=t.C,e.guitarBuffer=b(65536),e.guitarHead=0;for(var n=e.guitarBuffer,r=0;r<n.length;r++)n[r]=2*D()-1},process:function(e,n){for(var r=65536,a=r-1,o=+e.guitarA,i=+e.guitarB,u=+e.guitarC,l=o+i+u,s=e.guitarHead,c=e.guitarBuffer,h=0;h<n.length;h++){var f=t/n[h]|0,p=s-(f=f>r?r:f)+r&a;c[s]=(c[p-0+r&a]*o+c[p-1+r&a]*i+c[p-2+r&a]*u)/l,n[h]=c[s],s=s+1&a}return e.guitarHead=s,n.length}},e.Module.Filter={name:"Filter",params:{LP:{L:0,H:1,D:1},LPSlide:{L:-1,H:1,D:0},LPResonance:{L:0,H:1,D:0},HP:{L:0,H:1,D:0},HPSlide:{L:-1,H:1,D:0}},stage:l.SampleMod+0,setup:function(e,t){e.FilterEnabled=t.HP>1e-6||t.LP<1-1e-6,e.LPEnabled=t.LP<1-1e-6,e.LP=o(t.LP,3)/10,e.LPSlide=1+100*t.LPSlide/e.SampleRate,e.LPPos=0,e.LPPosSlide=0,e.LPDamping=5/(1+20*o(t.LPResonance,2))*(.01+t.LP),e.LPDamping=1-Math.min(e.LPDamping,.8),e.HP=o(t.HP,2)/10,e.HPPos=0,e.HPSlide=1+100*t.HPSlide/e.SampleRate},enabled:function(e){return e.FilterEnabled},process:function(e,t){if(!this.enabled(e))return t.length;for(var n=+e.LP,r=+e.LPPos,a=+e.LPPosSlide,o=+e.LPSlide,i=+e.LPDamping,u=+e.LPEnabled,l=+e.HP,s=+e.HPPos,c=+e.HPSlide,h=0;h<t.length;h++){(l>1e-6||l<-1e-6)&&(l=(l*=c)<1e-6?1e-6:l>.1?.1:l);var f=r;n=(n*=o)<0?n=0:n>.1?.1:n;var p=t[h];u?(a+=(p-r)*n,a*=i):(r=p,a=0),s+=(r+=a)-f,s*=1-l,t[h]=s}return e.LPPos=r,e.LPPosSlide=a,e.LP=n,e.HP=l,e.HPPos=s,t.length}},e.Module.Phaser={name:"Phaser",params:{Offset:{L:-1,H:1,D:0},Sweep:{L:-1,H:1,D:0}},stage:l.SampleMod+1,setup:function(e,t){e.phaserBuffer=b(1024),e.phaserPos=0,e.phaserOffset=1020*o(t.Offset,2),e.phaserOffsetSlide=4e3*o(t.Sweep,3)/e.SampleRate},enabled:function(e){return i(e.phaserOffsetSlide)>1e-6||i(e.phaserOffset)>1e-6},process:function(e,t){if(!this.enabled(e))return t.length;for(var n=e.phaserBuffer,r=0|e.phaserPos,a=+e.phaserOffset,o=+e.phaserOffsetSlide,i=0;i<t.length;i++){(a+=o)<0&&(a=-a,o=-o),a>1023&&(a=1023,o=0),n[r]=t[i];var u=r-(0|a)+1024&1023;t[i]+=n[u],r=r+1&1023|0}return e.phaserPos=r,e.phaserOffset=a,t.length}},e.Module.Volume={name:"Volume",params:{Master:{L:0,H:1,D:.5},Attack:{L:.001,H:1,D:.01},Sustain:{L:0,H:2,D:.3},Punch:{L:0,H:3,D:1},Decay:{L:.001,H:2,D:1}},stage:l.Volume,setup:function(e,t){var n=e.SampleRate,r=t.Master,a=r*(1+t.Punch);e.envelopes=[{S:0,E:r,N:t.Attack*n|0},{S:a,E:r,N:t.Sustain*n|0},{S:r,E:0,N:t.Decay*n|0}];for(var o=0;o<e.envelopes.length;o+=1){var i=e.envelopes[o];i.G=(i.E-i.S)/i.N}},process:function(e,t){for(var n=0;e.envelopes.length>0&&n<t.length;){for(var r=e.envelopes[0],a=r.S,o=r.G,i=0|Math.min(t.length-n,r.N),u=n+i|0;n<u;n+=1)t[n]*=a,a=y(a+=o,0,10);r.S=a,r.N-=i,r.N<=0&&e.envelopes.shift()}return n}},e.DefaultModules=[e.Module.Frequency,e.Module.Vibrato,e.Module.Generator,e.Module.Filter,e.Module.Phaser,e.Module.Volume],e.DefaultModules.sort(s),e.EmptyParams=f,e._RemoveEmptyParams=p,e.Preset={Reset:function(){return f()},Coin:function(){var e=f();return e.Frequency.Start=M(880,660),e.Volume.Sustain=M(.1),e.Volume.Decay=M(.4,.1),e.Volume.Punch=M(.3,.3),M()<.5&&(e.Frequency.ChangeSpeed=M(.15,.1),e.Frequency.ChangeAmount=M(8,4)),p(e),e},Laser:function(){var e=f();return e.Generator.Func=L(["square","saw","sine"]),M()<.33?(e.Frequency.Start=M(880,440),e.Frequency.Min=M(.1),e.Frequency.Slide=M(.3,-.8)):(e.Frequency.Start=M(1200,440),e.Frequency.Min=e.Frequency.Start-M(880,440),e.Frequency.Min<110&&(e.Frequency.Min=110),e.Frequency.Slide=M(.3,-1)),M()<.5?(e.Generator.A=M(.5),e.Generator.ASlide=M(.2)):(e.Generator.A=M(.5,.4),e.Generator.ASlide=M(.7)),e.Volume.Sustain=M(.2,.1),e.Volume.Decay=M(.4),M()<.5&&(e.Volume.Punch=M(.3)),M()<.33&&(e.Phaser.Offset=M(.2),e.Phaser.Sweep=M(.2)),M()<.5&&(e.Filter.HP=M(.3)),p(e),e},Explosion:function(){var e=f();return e.Generator.Func="noise",M()<.5?(e.Frequency.Start=M(440,40),e.Frequency.Slide=M(.4,-.1)):(e.Frequency.Start=M(1600,220),e.Frequency.Slide=M(-.2,-.2)),M()<.2&&(e.Frequency.Slide=0),M()<.3&&(e.Frequency.RepeatSpeed=M(.5,.3)),e.Volume.Sustain=M(.3,.1),e.Volume.Decay=M(.5),e.Volume.Punch=M(.6,.2),M()<.5&&(e.Phaser.Offset=M(.9,-.3),e.Phaser.Sweep=M(-.3)),M()<.33&&(e.Frequency.ChangeSpeed=M(.3,.6),e.Frequency.ChangeAmount=M(24,-12)),p(e),e},Powerup:function(){var e=f();return M()<.5?e.Generator.Func="saw":e.Generator.A=M(.6),e.Frequency.Start=M(220,440),M()<.5?(e.Frequency.Slide=M(.5,.2),e.Frequency.RepeatSpeed=M(.4,.4)):(e.Frequency.Slide=M(.2,.05),M()<.5&&(e.Vibrato.Depth=M(.6,.1),e.Vibrato.Frequency=M(30,10))),e.Volume.Sustain=M(.4),e.Volume.Decay=M(.4,.1),p(e),e},Hit:function(){var e=f();return e.Generator.Func=L(["square","saw","noise"]),e.Generator.A=M(.6),e.Generator.ASlide=M(1,-.5),e.Frequency.Start=M(880,220),e.Frequency.Slide=-M(.4,.3),e.Volume.Sustain=M(.1),e.Volume.Decay=M(.2,.1),M()<.5&&(e.Filter.HP=M(.3)),p(e),e},Jump:function(){var e=f();return e.Generator.Func="square",e.Generator.A=M(.6),e.Frequency.Start=M(330,330),e.Frequency.Slide=M(.4,.2),e.Volume.Sustain=M(.3,.1),e.Volume.Decay=M(.2,.1),M()<.5&&(e.Filter.HP=M(.3)),M()<.3&&(e.Filter.LP=M(-.6,1)),p(e),e},Select:function(){var e=f();return e.Generator.Func=L(["square","saw"]),e.Generator.A=M(.6),e.Frequency.Start=M(660,220),e.Volume.Sustain=M(.1,.1),e.Volume.Decay=M(.2),e.Filter.HP=.2,p(e),e},Lucky:function(){var t=f();return P(t,function(t,n){P(e.Module[n].params,function(e,n){if(e.C){var r=F(e.C);t[n]=r[r.length*D()|0]}else t[n]=D()*(e.H-e.L)+e.L})}),t.Volume.Master=.4,t.Filter={},p(t),t}},e.G.unoise=d("sample = Math.random();"),e.G.sine=d("sample = Math.sin(phase);"),e.G.saw=d("sample = 2*(phase/TAU - ((phase/TAU + 0.5)|0));"),e.G.triangle=d("sample = Math.abs(4 * ((phase/TAU - 0.25)%1) - 2) - 1;"),e.G.square=d("var s = Math.sin(phase); sample = s > A ? 1.0 : s < A ? -1.0 : A;"),e.G.synth=d("sample = Math.sin(phase) + .5*Math.sin(phase/2) + .3*Math.sin(phase/4);"),e.G.noise=d("if(phase % TAU < 4){__noiseLast = Math.random() * 2 - 1;} sample = __noiseLast;"),e.G.string={create:function(){for(var e=65536,t=e-1,n=b(e),r=0;r<n.length;r++)n[r]=2*D()-1;var a=0;return function(r,o){for(var i=2*Math.PI,u=+r.generatorA,l=+r.generatorASlide,s=+r.generatorB,c=+r.generatorBSlide,h=n,f=0;f<o.length;f++){var p=o[f];u=(u+=l)<0?0:u>1?1:u,s=(s+=c)<0?0:s>1?1:s;var d=a-(i/p|0)+e&t,g=(1*h[d-0+e&t]+h[d-1+e&t]*u+h[d-2+e&t]*s)/(1+u+s);h[a]=g,o[f]=h[a],a=a+1&t}return r.generatorA=u,r.generatorB=s,o.length}}},e.CreateAudio=g,e.DownloadAsFile=function(e){S(e instanceof Audio,"input must be an Audio object"),document.location.href=e.src},e.Util={},e.Util.CopyFToU8=m,e._createFloatArray=b;var A=Math.random;function D(){return A()}e.setRandomFunc=function(e){A=e}}(n={}),e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0);let a,o;t.Preset=r.Preset;let i,u,l={},s={},c=[];const h={c:t.Preset.Coin,l:t.Preset.Laser,e:t.Preset.Explosion,p:t.Preset.Powerup,h:t.Preset.Hit,j:t.Preset.Jump,s:t.Preset.Select,u:t.Preset.Lucky},f=function(e){let t=[];for(let n in e)e.hasOwnProperty(n)&&t.push(e[n]);return t}(h);let p=.5,d=!1;function g(e){null!=a&&(a._volume.gain.value=e)}function m(){null!=a&&T(c,e=>e.stop())}let S;function y(e=32,t=.25,n,r=60,a=1,i=0,u=0,l=1,s=!1,c=!1,h=!1,f=!1,p=null){const d=new D(n,v(r),a);if(d.noteInterval=t,null!=S&&s)d.noteRatios=S.noteRatios;else{const t=null!=p?function(e,t){return B(e,()=>o.get()>=t)}(e,p):function(e){let t=x(e,!1),n=4;for(;n<=e;)t=P(t,n),n*=2;return t}(e);d.noteRatios=function(e,t,n,r,a){let i=o.get(),u=o.get(-.5,.5),l=e.length/F.length,s=[];return e.forEach((e,n)=>{let c=Math.floor(n/l),h=n%l;if(a&&c===Math.floor(F.length/2))return s.push(s[h]),void(null!=s[h]&&(i=s[h]));e?(s.push(i),u+=o.get(-.25,.25),i+=u*r,(o.get()<.2||i<=t||i>=1)&&(i-=2*u,u*=-1)):s.push(null)}),s}(t,c?0:-1,0,l,f)}return d.notes=function(e,t,n,r){let a=e.length/F.length;return e.map((e,i)=>{if(null==e)return null;let u=Math.floor(i/a),l=F[u][0],s=M[F[u][1]],c=e;r&&(c=Math.floor(2*c)/2);let h=Math.floor(c),f=Math.floor((c-h)*s.length);for(f+=t+o.getInt(-n,n+1);f>=s.length;)f-=s.length,h++;for(;f<0;)f+=s.length,h--;return 100*(l+12*h+s[f])})}(d.noteRatios,i,u,h),S=d,d}function v(e){return 440*Math.pow(2,(e-69)/12)}function P(e,t){let n=x(t,!1);const r=Math.floor(4*Math.abs(o.get()+o.get()-1));for(let a=0;a<r;a++)n[o.getInt(t-1)]=!0;return G(e,(e,r)=>n[r%t]?!e:e)}t.init=function(e=0,n=120,l=60){a=r.Live({}),g(.1),u=e,o=new H,r.setRandomFunc(o.get),t.playInterval=60/n,i=1/l*3},t.setSeed=function(e=0){u=e},t.play=function(e="0",t=2,n=null,r=null,i=null){if(null==a)return;if(null!=l[e])return void l[e].play(i);if(o.setSeed(u+w(e)),null==r){let n=h[e[0]];void 0===n&&(n=o.select(f)),r=x(t,n)}const s=null==n?null:v(n);l[e]=new A(r,s),l[e].play(i)},t.playJingle=function(e="0",t=!1,n=57,r=16,i=.25,l=4,c=null,p=null){if(null==a)return;if(null!=s[e])return void s[e].forEach(e=>e.play(p));if(o.setSeed(u+w(e)),b(),S=null,null==c){let t=h[e[0]];void 0===t&&(t=o.select(f)),c=t}let d=.8;t&&(i/=4,d/=2),s[e]=B(l,()=>{const e=Math.floor(3*Math.abs(o.get()+o.get()-1)),a=Math.floor(10*(o.get()+o.get()-1)),u=t?2:Math.abs(o.get()+o.get()-1),l=o.get()<.25,s=!t&&o.get()<.5,h=o.get()<.5,f=t?o.get()<.25:o.get()<.9,p=o.get(.5),g=y(r,i,c,n,d,e,a,u,l,s,h,f,p);return g.isLooping=!1,g}),s[e].forEach(e=>e.play(p))},t.stopJingles=function(){q(s,e=>T(e,e=>e.stop()))},t.setVolume=g,t.setQuantize=function(e){p=e},t.update=function(){if(null==a)return;const e=a._context.currentTime,t=e+i;return q(l,n=>n.update(e,t)),q(s,n=>T(n,n=>n.update(e,t))),T(c,n=>n.update(e,t)),e},t.reset=function(){m(),l={},s={},c=[]},t.playEmpty=function(){if(null==a)return;if(d)return;const e=a._createEmptyBuffer();a._playBuffer(e,0),d=!0},t.resumeAudioContext=function(){a._context.resume()},t.playParam=function(e){null!=a&&a._play(e)},t.playBgm=function(e="0",n=45,r=32,i=.25,l=4,s=[t.Preset.Laser,t.Preset.Select,t.Preset.Hit,t.Preset.Hit],h=null){if(null==a)return;m(),o.setSeed(u+w(e)),b(),S=null;let f=o.select(s);T(c=B(l,()=>{const e=Math.floor(3*Math.abs(o.get()+o.get()-1)),t=Math.floor(10*(o.get()+o.get()-1)),a=Math.abs(o.get()+o.get()-1),u=o.get()<.25;u||(f=o.select(s));const l=o.get()<.5,c=o.get()<.5,h=o.get()<.9;return y(r,i,f,n,.7,e,t,a,u,l,c,h)}),e=>e.play(h))},t.stopBgm=m;const M=[[0,4,7],[0,3,7],[0,4,7,10],[0,4,7,11],[0,3,7,10]],L=[[[0,0],[7,0],[9,1],[4,1]],[[5,0],[0,0],[5,0],[7,0]],[[5,3],[7,2],[4,4],[9,1]],[[9,1],[2,1],[7,0],[0,0]],[[9,1],[5,0],[7,0],[0,0]]];let F;function b(){const e=o.select(L);F=e.map((e,t)=>[o.get()<.7?e[0]:L[o.getInt(L.length)][t][0],o.get()<.7?e[1]:o.getInt(M.length)])}class A{constructor(e,t=null,n=1){this.isPlaying=!1,this.playedTime=null,Array.isArray(e)||(e=[e]),this.buffers=G(e,e=>(e instanceof Function&&(e=e()),e.Volume.Sustain*=n,e.Volume.Decay*=n,null!=t&&(e.Frequency.Start=t),a._createBuffer(e))),this.gainNode=a._createGain()}play(e=null){this.isPlaying=!0,this.volume=e}stop(){this.isPlaying=!1}update(e,n){if(!this.isPlaying)return;this.isPlaying=!1;const r=t.playInterval*p,a=r>0?Math.ceil(e/r)*r:e;(null==this.playedTime||a>this.playedTime)&&(this.playLater(a),this.playedTime=a)}playLater(e,t=null){null==this.volume?T(this.buffers,n=>a._playBuffer(n,e,t)):(this.gainNode.gain.value=this.volume,T(this.buffers,n=>a._playBufferAndConnect(n,e,this.gainNode,t)))}}class D extends A{constructor(){super(...arguments),this.noteIndex=0,this.noteInterval=.25,this.scheduledTime=null,this.isLooping=!0}play(e=null){super.play(e),this.scheduledTime=null}update(e,t){if(this.isPlaying){null==this.scheduledTime&&this.calcFirstScheduledTime(e);for(let t=0;t<9&&!(this.scheduledTime>=e)&&(this.calcNextScheduledTime(),this.isLooping||0!==this.noteIndex);t++);if(this.scheduledTime<e)this.isLooping?this.scheduledTime=null:this.stop();else for(;this.scheduledTime<=t;){if(null!=this.nextNote&&this.playLater(this.scheduledTime,this.nextNote),!this.isLooping&&0===this.noteIndex)return void this.stop();this.calcNextScheduledTime()}}}calcFirstScheduledTime(e){this.scheduledTime=Math.ceil(e/t.playInterval)*t.playInterval-t.playInterval*this.noteInterval,this.noteIndex=0,this.calcNextScheduledTime()}calcNextScheduledTime(){const e=this.notes.length,n=t.playInterval*this.noteInterval;for(let t=0;t<e&&(this.scheduledTime+=n,this.nextNote=this.notes[this.noteIndex],this.noteIndex++,!(this.noteIndex>=e)||(this.noteIndex=0,this.isLooping))&&null==this.nextNote;t++);}}class H{get(e=1,t=null){return null==t&&(t=e,e=0),this.getToMaxInt()/4294967295*(t-e)+e}getInt(e,t=null){return null==t&&(t=e,e=0),this.getToMaxInt()%(t-e)+e}getPm(){return 2*this.getInt(2)-1}select(e){return e[this.getInt(e.length)]}setSeed(e=null,t=123456789,n=362436069,r=521288629,a=32){this.w=null!=e?e>>>0:Math.floor(4294967295*Math.random())>>>0,this.x=t>>>0,this.y=n>>>0,this.z=r>>>0;for(let o=0;o<a;o++)this.getToMaxInt();return this}getToMaxInt(){const e=this.x^this.x<<11;return this.x=this.y,this.y=this.z,this.z=this.w,this.w=(this.w^this.w>>>19^e^e>>>8)>>>0,this.w}constructor(){this.setSeed(),this.get=this.get.bind(this),this.getToMaxInt=this.getToMaxInt.bind(this)}}function w(e){let t=0;const n=e.length;for(let r=0;r<n;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return t}function x(e,t){let n=[];for(let r=0;r<e;r++)n.push(t);return n}function B(e,t){let n=[];for(let r=0;r<e;r++)n.push(t(r));return n}function T(e,t){for(let n=0;n<e.length;n++)t(e[n])}function q(e,t){for(let n in e)t(e[n])}function G(e,t){let n=[];for(let r=0;r<e.length;r++)n.push(t(e[r],r));return n}}])});
},{}],"pEXq":[function(require,module,exports) {
var define;
var t;!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof t&&t.amd?t([],n):"object"==typeof exports?exports.gcc=n():e.gcc=n()}(window,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e){GIFEncoder=function(){for(var t=0,e={};t<256;t++)e[t]=String.fromCharCode(t);function n(){this.bin=[]}n.prototype.getData=function(){for(var t="",n=this.bin.length,r=0;r<n;r++)t+=e[this.bin[r]];return t},n.prototype.writeByte=function(t){this.bin.push(t)},n.prototype.writeUTFBytes=function(t){for(var e=t.length,n=0;n<e;n++)this.writeByte(t.charCodeAt(n))},n.prototype.writeBytes=function(t,e,n){for(var r=n||t.length,o=e||0;o<r;o++)this.writeByte(t[o])};var r,o,i,a,c,u,f,s,l,d={},p=null,y=-1,w=0,h=!1,g=[],m=7,v=-1,B=!1,b=!0,F=!1,A=10,E="Generated by jsgif (https://github.com/antimatter15/jsgif/)",j=(d.setDelay=function(t){w=Math.round(t/10)},d.setDispose=function(t){t>=0&&(v=t)},d.setRepeat=function(t){t>=0&&(y=t)},d.setTransparent=function(t){p=t},d.setComment=function(t){E=t},d.addFrame=function(t,e){if(null===t||!h||null===a)throw new Error("Please call start method before calling addFrame");var n=!0;try{e?t instanceof ImageData?(c=t.data,sizeset&&r==t.width&&o==t.height||C(t.width,t.height)):t instanceof Uint8ClampedArray?t.length==r*o*4?c=t:(console.log("Please set the correct size: ImageData length mismatch"),n=!1):(console.log("Please provide correct input"),n=!1):(c=t.getImageData(0,0,t.canvas.width,t.canvas.height).data,F||C(t.canvas.width,t.canvas.height)),N(),S(),b&&(T(),D(),y>=0&&M()),P(),""!==E&&I(),O(),b||D(),L(),b=!1}catch(t){n=!1}return n},d.download=function(t){if(null===a||0==B)console.log("Please call start method and add frames and call finish method before calling download");else{t=void 0!==t?t.endsWith(".gif")?t:t+".gif":"download.gif";var e=document.createElement("a");e.download=t,e.href=URL.createObjectURL(new Blob([new Uint8Array(a.bin)],{type:"image/gif"})),e.click()}},d.finish=function(){if(!h)return!1;var t=!0;h=!1;try{a.writeByte(59),B=!0}catch(e){t=!1}return t},function(){i=0,c=null,u=null,f=null,l=null,B=!1,b=!0}),C=(d.setFrameRate=function(t){15!=t&&(w=Math.round(100/t))},d.setQuality=function(t){t<1&&(t=1),A=t},d.setSize=function(t,e){h&&!b||((r=t)<1&&(r=320),(o=e)<1&&(o=240),F=!0)}),S=(d.start=function(){j();var t=!0;B=!1,a=new n;try{a.writeUTFBytes("GIF89a")}catch(e){t=!1}return h=t},d.cont=function(){return j(),B=!1,a=new n,h=!0},function(){var t=u.length,e=t/3;f=[];var n=new NeuQuant(u,t,A);l=n.process();for(var r=0,o=0;o<e;o++){var a=n.map(255&u[r++],255&u[r++],255&u[r++]);g[a]=!0,f[o]=a}u=null,s=8,m=7,null!==p&&(i=x(p))}),x=function(t){if(null===l)return-1;for(var e=(16711680&t)>>16,n=(65280&t)>>8,r=255&t,o=0,i=16777216,a=l.length,c=0;c<a;){var u=e-(255&l[c++]),f=n-(255&l[c++]),s=r-(255&l[c]),d=u*u+f*f+s*s,p=c/3;g[p]&&d<i&&(i=d,o=p),c++}return o},N=function(){var t=r,e=o;u=[];for(var n=c,i=0,a=0;a<e;a++)for(var f=0;f<t;f++){var s=a*t*4+4*f;u[i++]=n[s],u[i++]=n[s+1],u[i++]=n[s+2]}},P=function(){var t,e;a.writeByte(33),a.writeByte(249),a.writeByte(4),null===p?(t=0,e=0):(t=1,e=2),v>=0&&(e=7&v),e<<=2,a.writeByte(0|e|t),U(w),a.writeByte(i),a.writeByte(0)},I=function(){a.writeByte(33),a.writeByte(254),a.writeByte(E.length),a.writeUTFBytes(E),a.writeByte(0)},O=function(){a.writeByte(44),U(0),U(0),U(r),U(o),b?a.writeByte(0):a.writeByte(128|m)},T=function(){U(r),U(o),a.writeByte(240|m),a.writeByte(0),a.writeByte(0)},M=function(){a.writeByte(33),a.writeByte(255),a.writeByte(11),a.writeUTFBytes("NETSCAPE2.0"),a.writeByte(3),a.writeByte(1),U(y),a.writeByte(0)},D=function(){a.writeBytes(l);for(var t=768-l.length,e=0;e<t;e++)a.writeByte(0)},U=function(t){a.writeByte(255&t),a.writeByte(t>>8&255)},L=function(){new LZWEncoder(r,o,f,s).encode(a)};return d.stream=function(){return a},d.setProperties=function(t,e){h=t,b=e},d},t.exports=GIFEncoder,LZWEncoder=function(){var t,e,n,r,o,i,a,c,u,f,s,l,d={},p=[],y=[],w=0,h=!1,g=0,m=0,v=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],B=[],b=d.LZWEncoder=function(o,i,a,c){t=o,e=i,n=a,r=Math.max(2,c)},F=function(t,e){B[l++]=t,l>=254&&C(e)},A=function(t){E(5003),w=f+2,h=!0,N(f,t)},E=function(t){for(var e=0;e<t;++e)p[e]=-1},j=d.compress=function(t,e){var n,r,o,i,d,g;for(h=!1,c=S(a=u=t),s=1+(f=1<<t-1),w=f+2,l=0,i=x(),g=0,n=5003;n<65536;n*=2)++g;g=8-g,E(5003),N(f,e);t:for(;-1!=(o=x());)if(n=(o<<12)+i,p[r=o<<g^i]!=n){if(p[r]>=0){d=5003-r,0===r&&(d=1);do{if((r-=d)<0&&(r+=5003),p[r]==n){i=y[r];continue t}}while(p[r]>=0)}N(i,e),i=o,w<4096?(y[r]=w++,p[r]=n):A(e)}else i=y[r];N(i,e),N(s,e)},C=(d.encode=function(n){n.writeByte(r),o=t*e,i=0,j(r+1,n),n.writeByte(0)},function(t){l>0&&(t.writeByte(l),t.writeBytes(B,0,l),l=0)}),S=function(t){return(1<<t)-1},x=function(){return 0===o?-1:(--o,255&n[i++])},N=function(t,e){for(g&=v[m],m>0?g|=t<<m:g=t,m+=a;m>=8;)F(255&g,e),g>>=8,m-=8;if((w>c||h)&&(h?(c=S(a=u),h=!1):c=12==++a?4096:S(a)),t==s){for(;m>0;)F(255&g,e),g>>=8,m-=8;C(e)}};return b.apply(this,arguments),d},NeuQuant=function(){var t,e,n,r,o,i={},a=[],c=[],u=[],f=[],s=i.NeuQuant=function(t,i,a){var f,s;for(e=t,n=i,r=a,o=new Array(256),f=0;f<256;f++)o[f]=new Array(4),(s=o[f])[0]=s[1]=s[2]=(f<<12)/256,u[f]=256,c[f]=0},l=(i.map=function(t,e,n){var r,i,c,u,f,s,l;for(f=1e3,l=-1,i=(r=a[e])-1;r<256||i>=0;)r<256&&((c=(s=o[r])[1]-e)>=f?r=256:(r++,c<0&&(c=-c),(u=s[0]-t)<0&&(u=-u),(c+=u)<f&&((u=s[2]-n)<0&&(u=-u),(c+=u)<f&&(f=c,l=s[3])))),i>=0&&((c=e-(s=o[i])[1])>=f?i=-1:(i--,c<0&&(c=-c),(u=s[0]-t)<0&&(u=-u),(c+=u)<f&&((u=s[2]-n)<0&&(u=-u),(c+=u)<f&&(f=c,l=s[3]))));return l},i.process=function(){return function(){var o,i,a,c,u,s,l,w,h,g,m,v,B,b;for(n<1509&&(r=1),t=30+(r-1)/3,v=e,B=0,b=n,g=(m=n/(3*r))/100|0,w=1024,(l=(s=2048)>>6)<=1&&(l=0),o=0;o<l;o++)f[o]=w*(256*(l*l-o*o)/(l*l));for(h=n<1509?3:n%499!=0?1497:n%491!=0?1473:n%487!=0?1461:1509,o=0;o<m;)if(a=(255&v[B+0])<<4,c=(255&v[B+1])<<4,u=(255&v[B+2])<<4,i=y(a,c,u),p(w,i,a,c,u),0!==l&&d(l,i,a,c,u),(B+=h)>=b&&(B-=n),0===g&&(g=1),++o%g==0)for(w-=w/t,(l=(s-=s/30)>>6)<=1&&(l=0),i=0;i<l;i++)f[i]=w*(256*(l*l-i*i)/(l*l))}(),l(),function(){var t,e,n,r,i,c,u,f;for(u=0,f=0,t=0;t<256;t++){for(n=t,r=(i=o[t])[1],e=t+1;e<256;e++)(c=o[e])[1]<r&&(n=e,r=c[1]);if(c=o[n],t!=n&&(e=c[0],c[0]=i[0],i[0]=e,e=c[1],c[1]=i[1],i[1]=e,e=c[2],c[2]=i[2],i[2]=e,e=c[3],c[3]=i[3],i[3]=e),r!=u){for(a[u]=f+t>>1,e=u+1;e<r;e++)a[e]=t;u=r,f=t}}for(a[u]=f+255>>1,e=u+1;e<256;e++)a[e]=255}(),function(){for(var t=[],e=new Array(256),n=0;n<256;n++)e[o[n][3]]=n;for(var r=0,i=0;i<256;i++){var a=e[i];t[r++]=o[a][0],t[r++]=o[a][1],t[r++]=o[a][2]}return t}()},function(){var t;for(t=0;t<256;t++)o[t][0]>>=4,o[t][1]>>=4,o[t][2]>>=4,o[t][3]=t}),d=function(t,e,n,r,i){var a,c,u,s,l,d,p;for((u=e-t)<-1&&(u=-1),(s=e+t)>256&&(s=256),a=e+1,c=e-1,d=1;a<s||c>u;){if(l=f[d++],a<s){p=o[a++];try{p[0]-=l*(p[0]-n)/(1<<18),p[1]-=l*(p[1]-r)/(1<<18),p[2]-=l*(p[2]-i)/(1<<18)}catch(t){}}if(c>u){p=o[c--];try{p[0]-=l*(p[0]-n)/(1<<18),p[1]-=l*(p[1]-r)/(1<<18),p[2]-=l*(p[2]-i)/(1<<18)}catch(t){}}}},p=function(t,e,n,r,i){var a=o[e];a[0]-=t*(a[0]-n)/1024,a[1]-=t*(a[1]-r)/1024,a[2]-=t*(a[2]-i)/1024},y=function(t,e,n){var r,i,a,f,s,l,d,p,y,w;for(y=p=~(1<<31),d=l=-1,r=0;r<256;r++)(i=(w=o[r])[0]-t)<0&&(i=-i),(a=w[1]-e)<0&&(a=-a),i+=a,(a=w[2]-n)<0&&(a=-a),(i+=a)<p&&(p=i,l=r),(f=i-(c[r]>>12))<y&&(y=f,d=r),s=u[r]>>10,u[r]-=s,c[r]+=s<<10;return u[l]+=64,c[l]-=65536,d};return s.apply(this,arguments),i}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(0);let o,i,a;e.options={scale:.5,durationSec:3,keyCode:67,capturingFps:20,appFps:60,isAppendingImgElement:!0,quality:10,downloadFileName:null};let c=0,u=0,f=new Image,s=!1;function l(t){u++;const n=e.options.appFps/e.options.capturingFps;u<n||(u-=n,i||function(t){s?i=[]:(o=e.options.durationSec*e.options.capturingFps,i=y(o,()=>d(t)),a=y(o,()=>!1)),document.addEventListener("keydown",t=>{t.keyCode==e.options.keyCode&&p()})}(t),s&&i.push(d(t)),i[c].drawImage(t,0,0),s||(a[c]=!0),c++,!s&&c>=o&&(c=0))}function d(t){const n=document.createElement("canvas");n.width=t.width*e.options.scale,n.height=t.height*e.options.scale;const r=n.getContext("2d");return r.scale(e.options.scale,e.options.scale),r}function p(){const t=new r;if(t.setRepeat(0),t.setDelay(1e3/e.options.capturingFps),t.setQuality(e.options.quality),t.start(),s)y(c-1,e=>{t.addFrame(i[e])});else{let e=c;y(o,()=>{a[e]&&t.addFrame(i[e]),++e>=o&&(e=0)})}if(t.finish(),null!=e.options.downloadFileName)return t.download(e.options.downloadFileName),null;const n=t.stream().getData(),u=document.createElement("img");return u.src="data:image/gif;base64,"+function(t){for(var e,n,r,o,i,a,c,u="",f=0,s=t.length,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";f<s;)o=(e=t.charCodeAt(f++))>>2,i=(3&e)<<4|(n=t.charCodeAt(f++))>>4,a=(15&n)<<2|(r=t.charCodeAt(f++))>>6,c=63&r,isNaN(n)?a=c=64:isNaN(r)&&(c=64),u=u+l.charAt(o)+l.charAt(i)+l.charAt(a)+l.charAt(c);return u}(n),e.options.isAppendingImgElement&&document.getElementsByTagName("body")[0].appendChild(u),u}function y(t,e){let n=[];for(let r=0;r<t;r++)n.push(e(r));return n}e.capture=l,e.captureSvg=function(t){const n=e.options.appFps/e.options.capturingFps;if(u+1<n)return void u++;const r=(new XMLSerializer).serializeToString(t);f.src="data:image/svg+xml;base64,"+btoa(r),l(f)},e.end=p,e.setOptions=function(t){for(let n in t)e.options[n]=t[n];s=e.options.durationSec<=0}}])});
},{}],"Tx6Z":[function(require,module,exports) {
"use strict";function r(){var r=0,t=32,s=0;exports.dotPatterns=[];for(var a=0;a<e;a++){for(var f=[],i=0;i<5;i++)for(var n=0;n<4;n++)++t>=32&&(r=o[s++],t=0),(1&r)>0&&f.push({x:n,y:i}),r>>=1;exports.dotPatterns.push(f)}exports.charToIndex=[];for(var p=0;p<128;p++){var x=-2;if(32==p)x=-1;else if(p>=48&&p<58)x=p-48;else if(p>=65&&p<90)x=p-65+10;else{var d="()[]<>=+-*/%&_!?,.:|'\"$@#\\urdl".indexOf(String.fromCharCode(p));d>=0&&(x=d+36)}exports.charToIndex.push(x)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=r;var e=66,o=[1178905252,1864668900,4116998473,376992244,613021335,3915814550,2046400104,2442557817,528062838,292683543,4187935126,3997453977,1398351172,4193325337,2648414617,2037815702,2128188945,2250152313,2571388135,1181324953,1771503001,4098267545,572846664,639910948,1682204194,2217230920,1089531940,251675876,1208634944,2588250404,678422,1678001392,2147500105,1077936132,1145323584,178257988,1685513216,4210713049,3830337194,619979845,4064601412,66];
},{}],"iXZc":[function(require,module,exports) {
"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function n(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}Object.defineProperty(exports,"__esModule",{value:!0});var i=function(){function e(){t(this,e),this.setSeed()}return n(e,[{key:"get",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1?arguments[1]:void 0;return null==e&&(e=t,t=0),this.next()/4294967295*(e-t)+t}},{key:"getInt",value:function(t,e){return null==e&&(e=t,t=0),this.next()%(e-t)+t}},{key:"getPlusOrMinus",value:function(){return 2*this.getInt(2)-1}},{key:"select",value:function(t){return t[this.getInt(t.length)]}},{key:"setSeed",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:123456789,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:362436069,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:521288629,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:32;this.w=null!=t?t>>>0:Math.floor(4294967295*Math.random())>>>0,this.x=e>>>0,this.y=n>>>0,this.z=i>>>0;for(var u=0;u<r;u++)this.next();return this}},{key:"next",value:function(){var t=this.x^this.x<<11;return this.x=this.y,this.y=this.z,this.z=this.w,this.w=(this.w^this.w>>>19^t^t>>>8)>>>0,this.w}}]),e}();exports.default=i;
},{}],"iUdv":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var t=e(require("./vector")),s=e(require("./random")),o=require("./math");exports.pos=new t.default,exports.move=new t.default,exports.pressedPos=new t.default,exports.targetPos=new t.default,exports.isPressed=!1,exports.isJustPressed=!1;var r,n,p,d,u=new t.default,x=!1,i=!1,a=!1,c=new t.default,f=!1,l=!1,g=new s.default,v=new t.default,P=new t.default,y=!1;function h(e,s){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new t.default,u=arguments.length>3?arguments[3]:void 0,x=arguments.length>4?arguments[4]:void 0,i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];r=e,n=new t.default(s.x+2*o.x,s.y+2*o.y),a||(p=o,d=x,(l=i)&&v.set(n.x/2,n.y/2),document.addEventListener("mousedown",function(e){J(e.pageX,e.pageY)}),document.addEventListener("touchstart",function(e){null!=u&&u(),J(e.touches[0].pageX,e.touches[0].pageY)}),document.addEventListener("mousemove",function(e){I(e.pageX,e.pageY)}),document.addEventListener("touchmove",function(e){e.preventDefault(),I(e.touches[0].pageX,e.touches[0].pageY)},{passive:!1}),document.addEventListener("mouseup",function(e){X(e)}),document.addEventListener("touchend",function(e){e.preventDefault(),e.target.click(),X(e)},{passive:!1}),a=!0)}function m(){if(a){_(u.x,u.y,exports.pos);var e=exports.isPressed;l&&!exports.pos.isInRect(0,0,n.x,n.y)&&(Y(),exports.pos.set(v),x=y,!e&&x&&(i=!0)),exports.isPressed=x,exports.isJustPressed=!e&&i,i=!1,exports.isJustPressed&&(exports.pressedPos.set(exports.pos),c.set(exports.pos)),exports.move.set(exports.pos.x-c.x,exports.pos.y-c.y),c.set(exports.pos),f?(exports.targetPos.set(exports.pos),f=!1):exports.targetPos.add(exports.move)}}function w(){exports.isJustPressed=!1,exports.isPressed=!0}function L(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;exports.pressedPos.x+=(exports.pos.x-exports.pressedPos.x)*e,exports.pressedPos.y+=(exports.pos.y-exports.pressedPos.y)*e}function E(e){exports.targetPos.set(e)}function _(e,t,s){s.x=((e-r.offsetLeft)/r.clientWidth+.5)*n.x-p.x,s.y=((t-r.offsetTop)/r.clientHeight+.5)*n.y-p.y}function J(e,t){u.set(e,t),x=i=!0}function I(e,t){u.set(e,t),x||(f=!0)}function X(e){x=!1,null!=d&&d()}function Y(){P.length>0?(v.add(P),!o.isInRange(v.x,.1*-n.x,1.1*n.x)&&v.x*P.x>0&&(P.x*=-1),!o.isInRange(v.y,.1*-n.y,1.1*n.y)&&v.y*P.y>0&&(P.y*=-1),g.get()<.05&&P.set(0)):g.get()<.1&&(P.set(0),P.addAngle(g.get(2*Math.PI),(n.x+n.y)*g.get(.01,.03))),g.get()<.05&&(y=!y)}exports.init=h,exports.update=m,exports.clearJustPressed=w,exports.resetPressedPointerPos=L,exports.setTargetPos=E;
},{"./vector":"HIZ7","./random":"iXZc","./math":"pR4u"}],"+kme":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var t=e(require("./vector")),s=require("./math");exports.isPressed=!1,exports.isJustPressed=!1,exports.stick=new t.default;var r=!1,o=!1,i=!1,n=s.range(256).map(function(){return!1}),c=[[39,68,102],[40,83,101,98],[37,65,100],[38,87,104]],u=[[1,0],[0,1],[-1,0],[0,-1]],p=[90,88,67,86,66,78,77,188,190,191,17,16,18,32,13];function d(){document.addEventListener("keydown",function(e){n[e.keyCode]=!0}),document.addEventListener("keyup",function(e){n[e.keyCode]=!1}),i=!0}function x(){if(i){var e=exports.isPressed;exports.isPressed=!1,exports.stick.set(0),c.forEach(function(e,t){e.forEach(function(e){if(n[e])return exports.stick.x+=u[t][0],exports.stick.y+=u[t][1],r&&(exports.isPressed=!0),!1})}),exports.stickAngle=0,exports.stick.length>0&&a(exports.stick.getAngle()),p.forEach(function(e){if(n[e])return exports.isPressed=!0,!1}),exports.isJustPressed=!e&&exports.isPressed}}function a(e){var t=o?Math.PI/2:Math.PI/4,r=o?2:1;exports.stickAngle=s.wrap(Math.round(e/t)*r,0,8),exports.stick.set(0),exports.stick.addAngle(exports.stickAngle*t,1),exports.stickAngle++}exports.init=d,exports.update=x;
},{"./vector":"HIZ7","./math":"pR4u"}],"Cmo+":[function(require,module,exports) {
"use strict";var e=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t},t=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var i=e(require("../..")),r=e(require("sounds-some-sounds")),s=e(require("gif-capture-canvas")),n=e(require("./letterPattern")),o=e(require("./pointer")),a=e(require("./keyboard")),u=t(require("./vector")),d=t(require("./random"));exports.random=new d.default,exports.ticks=0,exports.difficulty=1,exports.isUsingKeyboard=!1;var l,c,p,f,v,m=30,x=!1,g=!1,_=!1,k=!1;function q(e){var t=e.title,d=e.game,f=e.gameOver,m=e.init,q=e.screen,P=e.actorClass,S=e.isDebugMode,w=void 0!==S&&S,C=e.isCapturing,M=void 0!==C&&C,U=e.isUsingSSS,A=void 0!==U&&U,j=e.onTouchStart,D=void 0===j?void 0:j,F=e.onPointerUp,K=void 0===F?void 0:F;p=t,l=d,c=f,(k=A)&&r.init(),v=q,q.init(),n.init(),o.init(q.canvas,new u.default(q.size),new u.default(q.padding),k?r.playEmpty:D,k?r.resumeAudioContext:K,w),x&&a.init(),null!=P&&i.setActorClass(P),i.reset(),(_=M)&&s.setOptions({scale:1,capturingFps:60}),null!=m&&m(),w?h():null!=p?b():y(),g||(O(),g=!0)}function y(){"game"===f&&(null!=c&&c(),f="gameOver",exports.ticks=0)}function O(){requestAnimationFrame(O),k&&r.update(),o.update(),x&&a.update(),v.clear(),i.update(),P(),exports.ticks++,_&&s.capture(v.canvas)}function P(){("title"===f||"gameOver"===f&&exports.ticks>40)&&(o.isPressed||x&&a.isPressed)&&(exports.isUsingKeyboard=x&&a.isPressed,h()),"gameOver"===f&&exports.ticks>180&&b(),exports.difficulty="game"===f?1+exports.ticks/60/m:1}function b(){null!=p&&(f="title",exports.ticks=0,p())}function h(){f="game",exports.ticks=0,null!=l&&l()}exports.init=q,exports.endGame=y;
},{"../..":"qYDV","sounds-some-sounds":"YgJ8","gif-capture-canvas":"pEXq","./letterPattern":"Tx6Z","./pointer":"iUdv","./keyboard":"+kme","./vector":"HIZ7","./random":"iXZc"}],"X6AO":[function(require,module,exports) {
"use strict";var r=this&&this.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(null!=r)for(var e in r)Object.hasOwnProperty.call(r,e)&&(t[e]=r[e]);return t.default=r,t};Object.defineProperty(exports,"__esModule",{value:!0});var t=r(require("./screen")),e=require("../letterPattern");function n(r,t,e){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=n.align,o=void 0===i?"center":i,l=n.style,c=void 0===l?"black":l,f=n.scale,v=void 0===f?1:f,h=r.split("\n"),s=e;h.forEach(function(r){a(r,t,s,o,c,v),s+=6*v})}function a(r,t,n,a,o,l){var c=5*l,f=t;"left"===a||(f-="right"===a?r.length*c:r.length*c/2);for(var v=n,h=0;h<r.length;h++){var s=e.charToIndex[r.charCodeAt(h)];if(-2===s)throw"invalid char: ".concat(r.charAt(h));s>=0&&i(s,f,v,o,l),f+=c}}function i(r,n,a,i,o){for(var l=e.dotPatterns[r],c=0;c<l.length;c++){var f=l[c];t.fillRect(f.x*o+n,f.y*o+a,o,o,i)}}exports.draw=n,exports.drawLine=a;
},{"./screen":"Omv8","../letterPattern":"Tx6Z"}],"jCwb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tokenize=u,exports.fromMidi=O,exports.enharmonic=exports.simplify=exports.build=exports.from=exports.altToAcc=exports.stepToLetter=exports.oct=exports.chroma=exports.freqToMidi=exports.freq=exports.midiToFreq=exports.midi=exports.pc=exports.name=exports.props=exports.names=void 0;var r="C C# Db D D# Eb E F F# Gb G G# Ab A A# Bb B".split(" "),t=function(t){return"string"!=typeof t?r.slice():r.filter(function(r){var e=r[1]||" ";return-1!==t.indexOf(e)})};exports.names=t;var e=t(" #"),n=t(" b"),o=/^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)$/;function u(r){"string"!=typeof r&&(r="");var t=o.exec(r);return t?[t[1].toUpperCase(),t[2].replace(/x/g,"##"),t[3],t[4]]:null}var i=Object.freeze({pc:null,name:null,step:null,alt:null,oct:null,octStr:null,chroma:null,midi:null,freq:null}),c=[0,2,4,5,7,9,11],l=function(r){var t=u(r);if(""===t[0]||""!==t[3])return i;var e=t[0],n=t[1],o=t[2],l={letter:e,acc:n,octStr:o};return l.pc=l.letter+l.acc,l.name=l.pc+o,l.step=(l.letter.charCodeAt(0)+3)%7,l.alt="b"===l.acc[0]?-l.acc.length:l.acc.length,l.oct=o.length?+o:null,l.chroma=(c[l.step]+l.alt+120)%12,l.midi=null!==l.oct?c[l.step]+l.alt+12*(l.oct+1):null,l.freq=m(l.midi),Object.freeze(l)},a=function(r,t){return void 0===t&&(t={}),function(e){return t[e]||(t[e]=r(e))}},p=a(l);exports.props=p;var s=function(r){return p(r).name};exports.name=s;var f=function(r){return p(r).pc};exports.pc=f;var x=function(r){return r>=0&&r<=127},v=function(r){if("number"!=typeof r&&"string"!=typeof r)return null;var t=p(r).midi,e=t||0===t?t:+r;return x(e)?e:null};exports.midi=v;var m=function(r,t){return void 0===t&&(t=440),"number"==typeof r?Math.pow(2,(r-69)/12)*t:null};exports.midiToFreq=m;var d=function(r){return p(r).freq||m(r)};exports.freq=d;var h=Math.log(2),b=Math.log(440),g=function(r){var t=12*(Math.log(r)-b)/h+69;return Math.round(100*t)/100};exports.freqToMidi=g;var M=function(r){return p(r).chroma};exports.chroma=M;var y=function(r){return p(r).oct};exports.oct=y;var q="CDEFGAB",A=function(r){return q[r]};exports.stepToLetter=A;var T=function(r,t){return Array(t+1).join(r)},j=function(r,t){return"number"!=typeof r?"":t(r)},C=function(r){return j(r,function(r){return r<0?T("b",-r):T("#",r)})};exports.altToAcc=C;var F=function(r,t){void 0===r&&(r={}),void 0===t&&(t=null);var e=t?Object.assign({},p(t),r):r,n=e.step,o=e.alt,u=e.oct,i=A(n);if(!i)return null;var c=i+C(o);return u||0===u?c+u:c};exports.from=F;var G=F;function O(r,t){return r=Math.round(r),(!0===t?e:n)[r%12]+(Math.floor(r/12)-1)}exports.build=G;var D=function(r,t){var e=p(r),n=e.alt,o=e.chroma,u=e.midi;if(null===o)return null;var i=!1===t?n<0:n>0;return null===u?f(O(o,i)):O(u,i)};exports.simplify=D;var z=function(r){return D(r,!1)};exports.enharmonic=z;
},{}],"6i0t":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.range=e,exports.rotate=o,exports.sort=c,exports.unique=a,exports.permutations=exports.shuffle=exports.compact=void 0;var r=require("tonal-note");function t(r,t){for(var n=[];t--;n[t]=t+r);return n}function n(r,t){for(var n=[];t--;n[t]=r-t);return n}function e(r,e){return null===r||null===e?[]:r<e?t(r,e-r+1):n(r,r-e+1)}function o(r,t){var n=t.length,e=(r%n+n)%n;return t.slice(e,n).concat(t.slice(0,e))}var u=function(r){return r.filter(function(r){return 0===r||r})};exports.compact=u;var i=function(t){var n=(0,r.props)(t).midi;return null!==n?n:(0,r.props)(t+"-100").midi};function c(t){return u(t.map(r.name)).sort(function(r,t){return i(r)>i(t)})}function a(r){return c(r).filter(function(r,t,n){return 0===t||r!==n[t-1]})}var s=function(r,t){var n,e;void 0===t&&(t=Math.random);for(var o=r.length;o;)n=t()*o--|0,e=r[o],r[o]=r[n],r[n]=e;return r};exports.shuffle=s;var f=function(r){return 0===r.length?[[]]:f(r.slice(1)).reduce(function(t,n){return t.concat(r.map(function(t,e){var o=n.slice();return o.splice(e,0,r[0]),o}))},[])};exports.permutations=f;
},{"tonal-note":"jCwb"}],"/sxS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.props=d,exports.fromSemitones=exports.invert=exports.simplify=exports.build=exports.ic=exports.chroma=exports.semitones=exports.name=exports.num=exports.tokenize=exports.names=void 0;var t="([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})",e="(AA|A|P|M|m|d|dd)([-+]?\\d+)",r=new RegExp("^"+t+"|"+e+"$"),n=[0,2,4,5,7,9,11],o="PMMPPMM",u=[0,1,2,3,4,5,6,5,4,3,2,1],s="1P 2m 2M 3m 3M 4P 5P 6m 6M 7m 7M 8P".split(" "),i=function(t){return"string"!=typeof t?s.slice():s.filter(function(e){return-1!==t.indexOf(e[1])})};exports.names=i;var l=function(t){var e=r.exec(t);return null===e?null:e[1]?[e[1],e[2]]:[e[4],e[3]]};exports.tokenize=l;var a=Object.freeze({name:null,num:null,q:null,step:null,alt:null,dir:null,type:null,simple:null,semitones:null,chroma:null}),m=function(t,e){return Array(Math.abs(e)+1).join(t)},p=function(t,e){return"M"===e&&"M"===t?0:"P"===e&&"P"===t?0:"m"===e&&"M"===t?-1:/^A+$/.test(e)?e.length:/^d+$/.test(e)?"P"===t?-e.length:-e.length-1:null},c=function(t,e){return 0===e?"M"===t?"M":"P":-1===e&&"M"===t?"m":e>0?m("A",e):e<0?m("d","P"===t?e:e+1):null},f=function(t){return(Math.abs(t)-1)%7},v=function(t){var e=l(t);if(null===e)return a;var r={num:+e[0],q:e[1]};return r.step=f(r.num),r.type=o[r.step],"M"===r.type&&"P"===r.q?a:(r.name=""+r.num+r.q,r.dir=r.num<0?-1:1,r.simple=8===r.num||-8===r.num?r.num:r.dir*(r.step+1),r.alt=p(r.type,r.q),r.oct=Math.floor((Math.abs(r.num)-1)/7),r.semitones=r.dir*(n[r.step]+r.alt+12*r.oct),r.chroma=(r.dir*(n[r.step]+r.alt)%12+12)%12,Object.freeze(r))},M={};function d(t){return"string"!=typeof t?a:M[t]||(M[t]=v(t))}var x=function(t){return d(t).num};exports.num=x;var P=function(t){return d(t).name};exports.name=P;var h=function(t){return d(t).semitones};exports.semitones=h;var y=function(t){return d(t).chroma};exports.chroma=y;var b=function(t){return"string"==typeof t&&(t=d(t).chroma),"number"==typeof t?u[t%12]:null};exports.ic=b;var g=function(t){void 0===t&&(t={});var e=t.num,r=t.step,n=t.alt,u=t.oct;void 0===u&&(u=1);var s=t.dir;if(void 0!==r&&(e=r+1+7*u),void 0===e)return null;var i=s<0?"-":"",l=o[f(e)];return i+e+c(l,n)};exports.build=g;var A=function(t){var e=d(t);return e===a?null:e.simple+e.q};exports.simplify=A;var q=function(t){var e=d(t);if(e===a)return null;var r=(7-e.step)%7,n="P"===e.type?-e.alt:-(e.alt+1);return g({step:r,alt:n,oct:e.oct,dir:e.dir})};exports.invert=q;var j=[1,2,2,3,3,4,5,5,6,6,7,7],z="P m M m M P d P m M m M".split(" "),O=function(t){var e=t<0?-1:1,r=Math.abs(t),n=r%12,o=Math.floor(r/12);return e*(j[n]+7*o)+z[n]};exports.fromSemitones=O;
},{}],"WV7l":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.transpose=v,exports.trFifths=h,exports.fifths=d,exports.transposeBy=g,exports.addIntervals=b,exports.add=M,exports.subtract=q,exports.interval=y,exports.semitones=_;var n=require("tonal-note"),r=require("tonal-interval"),t=[0,2,4,-1,1,3,5],u=function(n){return Math.floor(7*n/12)},e=t.map(u),l=function(n){var r=n.step,u=n.alt,l=n.oct,o=n.dir;void 0===o&&(o=1);var i=t[r]+7*u;return null===l?[o*i]:[o*i,o*(l-e[r]-4*u)]},o=[3,0,4,1,5,2,6];function i(n){var r=(n+1)%7;return r<0?7+r:r}var f=function(n,r,t){var u=o[i(n)],l=Math.floor((n+1)/7);return void 0===r?{step:u,alt:l,dir:t}:{step:u,alt:l,oct:r+4*l+e[u],dir:t}},a=function(n,r){return void 0===r&&(r={}),function(t){return r[t]||(r[t]=n(t))}},c=function(n){return a(function(r){var t=n(r);return null===t.name?null:l(t)})},s=c(n.props),p=c(r.props);function v(r,t){if(1===arguments.length)return function(n){return v(r,n)};var u=s(r),e=p(t);if(null===u||null===e)return null;var l=1===u.length?[u[0]+e[0]]:[u[0]+e[0],u[1]+e[1]];return(0,n.build)(f(l[0],l[1]))}function h(r,t){if(1===arguments.length)return function(n){return h(r,n)};var u=s(r);return null===u?null:(0,n.build)(f(u[0]+t))}function d(n,r){if(1===arguments.length)return function(r){return d(n,r)};var t=s(n),u=s(r);return null===u||null===t?null:u[0]-t[0]}function g(n,r){return 1===arguments.length?function(r){return v(r,n)}:v(r,n)}var m=function(n){return 7*n[0]+12*n[1]<0},x=function(n){return m(n)?f(-n[0],-n[1],-1):f(n[0],n[1],1)};function b(n,t,u){var e=p(n),l=p(t);if(null===e||null===l)return null;var o=[e[0]+u*l[0],e[1]+u*l[1]];return(0,r.build)(x(o))}function M(n,r){return 1===arguments.length?function(r){return M(n,r)}:b(n,r,1)}function q(n,r){return 1===arguments.length?function(r){return M(n,r)}:b(n,r,-1)}function y(n,t){if(1===arguments.length)return function(r){return y(n,r)};var u=s(n),e=s(t);if(null===u||null===e||u.length!==e.length)return null;var l=1===u.length?[e[0]-u[0],-Math.floor(7*(e[0]-u[0])/12)]:[e[0]-u[0],e[1]-u[1]];return(0,r.build)(x(l))}function _(r,t){if(1===arguments.length)return function(n){return _(r,n)};var u=(0,n.props)(r),e=(0,n.props)(t);return null!==u.midi&&null!==e.midi?e.midi-u.midi:null!==u.chroma&&null!==e.chroma?(e.chroma-u.chroma+12)%12:null}
},{"tonal-note":"jCwb","tonal-interval":"/sxS"}],"wrJo":[function(require,module,exports) {
module.exports={chromatic:["1P 2m 2M 3m 3M 4P 4A 5P 6m 6M 7m 7M"],lydian:["1P 2M 3M 4A 5P 6M 7M"],major:["1P 2M 3M 4P 5P 6M 7M",["ionian"]],mixolydian:["1P 2M 3M 4P 5P 6M 7m",["dominant"]],dorian:["1P 2M 3m 4P 5P 6M 7m"],aeolian:["1P 2M 3m 4P 5P 6m 7m",["minor"]],phrygian:["1P 2m 3m 4P 5P 6m 7m"],locrian:["1P 2m 3m 4P 5d 6m 7m"],"melodic minor":["1P 2M 3m 4P 5P 6M 7M"],"melodic minor second mode":["1P 2m 3m 4P 5P 6M 7m"],"lydian augmented":["1P 2M 3M 4A 5A 6M 7M"],"lydian dominant":["1P 2M 3M 4A 5P 6M 7m",["lydian b7"]],"melodic minor fifth mode":["1P 2M 3M 4P 5P 6m 7m",["hindu","mixolydian b6M"]],"locrian #2":["1P 2M 3m 4P 5d 6m 7m",["half-diminished"]],altered:["1P 2m 3m 3M 5d 6m 7m",["super locrian","diminished whole tone","pomeroy"]],"harmonic minor":["1P 2M 3m 4P 5P 6m 7M"],"phrygian dominant":["1P 2m 3M 4P 5P 6m 7m",["spanish","phrygian major"]],"half-whole diminished":["1P 2m 3m 3M 4A 5P 6M 7m",["dominant diminished"]],diminished:["1P 2M 3m 4P 5d 6m 6M 7M",["whole-half diminished"]],"major pentatonic":["1P 2M 3M 5P 6M",["pentatonic"]],"lydian pentatonic":["1P 3M 4A 5P 7M",["chinese"]],"mixolydian pentatonic":["1P 3M 4P 5P 7m",["indian"]],"locrian pentatonic":["1P 3m 4P 5d 7m",["minor seven flat five pentatonic"]],"minor pentatonic":["1P 3m 4P 5P 7m"],"minor six pentatonic":["1P 3m 4P 5P 6M"],"minor hexatonic":["1P 2M 3m 4P 5P 7M"],"flat three pentatonic":["1P 2M 3m 5P 6M",["kumoi"]],"flat six pentatonic":["1P 2M 3M 5P 6m"],"major flat two pentatonic":["1P 2m 3M 5P 6M"],"whole tone pentatonic":["1P 3M 5d 6m 7m"],"ionian pentatonic":["1P 3M 4P 5P 7M"],"lydian #5P pentatonic":["1P 3M 4A 5A 7M"],"lydian dominant pentatonic":["1P 3M 4A 5P 7m"],"minor #7M pentatonic":["1P 3m 4P 5P 7M"],"super locrian pentatonic":["1P 3m 4d 5d 7m"],"in-sen":["1P 2m 4P 5P 7m"],iwato:["1P 2m 4P 5d 7m"],hirajoshi:["1P 2M 3m 5P 6m"],kumoijoshi:["1P 2m 4P 5P 6m"],pelog:["1P 2m 3m 5P 6m"],"vietnamese 1":["1P 3m 4P 5P 6m"],"vietnamese 2":["1P 3m 4P 5P 7m"],prometheus:["1P 2M 3M 4A 6M 7m"],"prometheus neopolitan":["1P 2m 3M 4A 6M 7m"],ritusen:["1P 2M 4P 5P 6M"],scriabin:["1P 2m 3M 5P 6M"],piongio:["1P 2M 4P 5P 6M 7m"],"major blues":["1P 2M 3m 3M 5P 6M"],"minor blues":["1P 3m 4P 5d 5P 7m",["blues"]],"composite blues":["1P 2M 3m 3M 4P 5d 5P 6M 7m"],augmented:["1P 2A 3M 5P 5A 7M"],"augmented heptatonic":["1P 2A 3M 4P 5P 5A 7M"],"dorian #4":["1P 2M 3m 4A 5P 6M 7m"],"lydian diminished":["1P 2M 3m 4A 5P 6M 7M"],"whole tone":["1P 2M 3M 4A 5A 7m"],"leading whole tone":["1P 2M 3M 4A 5A 7m 7M"],"lydian minor":["1P 2M 3M 4A 5P 6m 7m"],"locrian major":["1P 2M 3M 4P 5d 6m 7m",["arabian"]],neopolitan:["1P 2m 3m 4P 5P 6m 7M"],"neopolitan minor":["1P 2m 3m 4P 5P 6m 7M"],"neopolitan major":["1P 2m 3m 4P 5P 6M 7M",["dorian b2"]],"neopolitan major pentatonic":["1P 3M 4P 5d 7m"],"romanian minor":["1P 2M 3m 5d 5P 6M 7m"],"double harmonic lydian":["1P 2m 3M 4A 5P 6m 7M"],"harmonic major":["1P 2M 3M 4P 5P 6m 7M"],"double harmonic major":["1P 2m 3M 4P 5P 6m 7M",["gypsy"]],egyptian:["1P 2M 4P 5P 7m"],"hungarian minor":["1P 2M 3m 4A 5P 6m 7M"],"hungarian major":["1P 2A 3M 4A 5P 6M 7m"],oriental:["1P 2m 3M 4P 5d 6M 7m"],"spanish heptatonic":["1P 2m 3m 3M 4P 5P 6m 7m"],flamenco:["1P 2m 3m 3M 4A 5P 7m"],balinese:["1P 2m 3m 4P 5P 6m 7M"],"todi raga":["1P 2m 3m 4A 5P 6m 7M"],"malkos raga":["1P 3m 4P 6m 7m"],"kafi raga":["1P 3m 3M 4P 5P 6M 7m 7M"],"purvi raga":["1P 2m 3M 4P 4A 5P 6m 7M"],persian:["1P 2m 3M 4P 5d 6m 7M"],bebop:["1P 2M 3M 4P 5P 6M 7m 7M"],"bebop dominant":["1P 2M 3M 4P 5P 6M 7m 7M"],"bebop minor":["1P 2M 3m 3M 4P 5P 6M 7m"],"bebop major":["1P 2M 3M 4P 5P 5A 6M 7M"],"bebop locrian":["1P 2m 3m 4P 5d 5P 6m 7m"],"minor bebop":["1P 2M 3m 4P 5P 6m 7m 7M"],"mystery #1":["1P 2m 3M 5d 6m 7m"],enigmatic:["1P 2m 3M 5d 6m 7m 7M"],"minor six diminished":["1P 2M 3m 4P 5P 6m 6M 7M"],"ionian augmented":["1P 2M 3M 4P 5A 6M 7M"],"lydian #9":["1P 2m 3M 4A 5P 6M 7M"],ichikosucho:["1P 2M 3M 4P 5d 5P 6M 7M"],"six tone symmetric":["1P 2m 3M 4P 5A 6M"]};
},{}],"XmRp":[function(require,module,exports) {
module.exports={4:["1P 4P 7m 10m",["quartal"]],64:["5P 8P 10M"],5:["1P 5P"],M:["1P 3M 5P",["Major",""]],"M#5":["1P 3M 5A",["augmented","maj#5","Maj#5","+","aug"]],"M#5add9":["1P 3M 5A 9M",["+add9"]],M13:["1P 3M 5P 7M 9M 13M",["maj13","Maj13"]],"M13#11":["1P 3M 5P 7M 9M 11A 13M",["maj13#11","Maj13#11","M13+4","M13#4"]],M6:["1P 3M 5P 13M",["6"]],"M6#11":["1P 3M 5P 6M 11A",["M6b5","6#11","6b5"]],M69:["1P 3M 5P 6M 9M",["69"]],"M69#11":["1P 3M 5P 6M 9M 11A"],"M7#11":["1P 3M 5P 7M 11A",["maj7#11","Maj7#11","M7+4","M7#4"]],"M7#5":["1P 3M 5A 7M",["maj7#5","Maj7#5","maj9#5","M7+"]],"M7#5sus4":["1P 4P 5A 7M"],"M7#9#11":["1P 3M 5P 7M 9A 11A"],M7add13:["1P 3M 5P 6M 7M 9M"],M7b5:["1P 3M 5d 7M"],M7b6:["1P 3M 6m 7M"],M7b9:["1P 3M 5P 7M 9m"],M7sus4:["1P 4P 5P 7M"],M9:["1P 3M 5P 7M 9M",["maj9","Maj9"]],"M9#11":["1P 3M 5P 7M 9M 11A",["maj9#11","Maj9#11","M9+4","M9#4"]],"M9#5":["1P 3M 5A 7M 9M",["Maj9#5"]],"M9#5sus4":["1P 4P 5A 7M 9M"],M9b5:["1P 3M 5d 7M 9M"],M9sus4:["1P 4P 5P 7M 9M"],Madd9:["1P 3M 5P 9M",["2","add9","add2"]],Maj7:["1P 3M 5P 7M",["maj7","M7"]],Mb5:["1P 3M 5d"],Mb6:["1P 3M 13m"],Msus2:["1P 2M 5P",["add9no3","sus2"]],Msus4:["1P 4P 5P",["sus","sus4"]],Maddb9:["1P 3M 5P 9m"],7:["1P 3M 5P 7m",["Dominant","Dom"]],9:["1P 3M 5P 7m 9M",["79"]],11:["1P 5P 7m 9M 11P"],13:["1P 3M 5P 7m 9M 13M",["13_"]],"11b9":["1P 5P 7m 9m 11P"],"13#11":["1P 3M 5P 7m 9M 11A 13M",["13+4","13#4"]],"13#9":["1P 3M 5P 7m 9A 13M",["13#9_"]],"13#9#11":["1P 3M 5P 7m 9A 11A 13M"],"13b5":["1P 3M 5d 6M 7m 9M"],"13b9":["1P 3M 5P 7m 9m 13M"],"13b9#11":["1P 3M 5P 7m 9m 11A 13M"],"13no5":["1P 3M 7m 9M 13M"],"13sus4":["1P 4P 5P 7m 9M 13M",["13sus"]],"69#11":["1P 3M 5P 6M 9M 11A"],"7#11":["1P 3M 5P 7m 11A",["7+4","7#4","7#11_","7#4_"]],"7#11b13":["1P 3M 5P 7m 11A 13m",["7b5b13"]],"7#5":["1P 3M 5A 7m",["+7","7aug","aug7"]],"7#5#9":["1P 3M 5A 7m 9A",["7alt","7#5#9_","7#9b13_"]],"7#5b9":["1P 3M 5A 7m 9m"],"7#5b9#11":["1P 3M 5A 7m 9m 11A"],"7#5sus4":["1P 4P 5A 7m"],"7#9":["1P 3M 5P 7m 9A",["7#9_"]],"7#9#11":["1P 3M 5P 7m 9A 11A",["7b5#9"]],"7#9#11b13":["1P 3M 5P 7m 9A 11A 13m"],"7#9b13":["1P 3M 5P 7m 9A 13m"],"7add6":["1P 3M 5P 7m 13M",["67","7add13"]],"7b13":["1P 3M 7m 13m"],"7b5":["1P 3M 5d 7m"],"7b6":["1P 3M 5P 6m 7m"],"7b9":["1P 3M 5P 7m 9m"],"7b9#11":["1P 3M 5P 7m 9m 11A",["7b5b9"]],"7b9#9":["1P 3M 5P 7m 9m 9A"],"7b9b13":["1P 3M 5P 7m 9m 13m"],"7b9b13#11":["1P 3M 5P 7m 9m 11A 13m",["7b9#11b13","7b5b9b13"]],"7no5":["1P 3M 7m"],"7sus4":["1P 4P 5P 7m",["7sus"]],"7sus4b9":["1P 4P 5P 7m 9m",["susb9","7susb9","7b9sus","7b9sus4","phryg"]],"7sus4b9b13":["1P 4P 5P 7m 9m 13m",["7b9b13sus4"]],"9#11":["1P 3M 5P 7m 9M 11A",["9+4","9#4","9#11_","9#4_"]],"9#11b13":["1P 3M 5P 7m 9M 11A 13m",["9b5b13"]],"9#5":["1P 3M 5A 7m 9M",["9+"]],"9#5#11":["1P 3M 5A 7m 9M 11A"],"9b13":["1P 3M 7m 9M 13m"],"9b5":["1P 3M 5d 7m 9M"],"9no5":["1P 3M 7m 9M"],"9sus4":["1P 4P 5P 7m 9M",["9sus"]],m:["1P 3m 5P"],"m#5":["1P 3m 5A",["m+","mb6"]],m11:["1P 3m 5P 7m 9M 11P",["_11"]],"m11A 5":["1P 3m 6m 7m 9M 11P"],m11b5:["1P 3m 7m 12d 2M 4P",["h11","_11b5"]],m13:["1P 3m 5P 7m 9M 11P 13M",["_13"]],m6:["1P 3m 4P 5P 13M",["_6"]],m69:["1P 3m 5P 6M 9M",["_69"]],m7:["1P 3m 5P 7m",["minor7","_","_7"]],"m7#5":["1P 3m 6m 7m"],m7add11:["1P 3m 5P 7m 11P",["m7add4"]],m7b5:["1P 3m 5d 7m",["half-diminished","h7","_7b5"]],m9:["1P 3m 5P 7m 9M",["_9"]],"m9#5":["1P 3m 6m 7m 9M"],m9b5:["1P 3m 7m 12d 2M",["h9","-9b5"]],mMaj7:["1P 3m 5P 7M",["mM7","_M7"]],mMaj7b6:["1P 3m 5P 6m 7M",["mM7b6"]],mM9:["1P 3m 5P 7M 9M",["mMaj9","-M9"]],mM9b6:["1P 3m 5P 6m 7M 9M",["mMaj9b6"]],mb6M7:["1P 3m 6m 7M"],mb6b9:["1P 3m 6m 9m"],o:["1P 3m 5d",["mb5","dim"]],o7:["1P 3m 5d 13M",["diminished","m6b5","dim7"]],o7M7:["1P 3m 5d 6M 7M"],oM7:["1P 3m 5d 7M"],sus24:["1P 2M 4P 5P",["sus4add9"]],"+add#9":["1P 3M 5A 9A"],madd4:["1P 3m 4P 5P"],madd9:["1P 3m 5P 9M"]};
},{}],"c4NH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.chroma=i,exports.chromas=a,exports.modes=f,exports.isChroma=l,exports.intervals=m,exports.isEqual=h,exports.isSubsetOf=x,exports.isSupersetOf=v,exports.includes=g,exports.filter=d;var r=require("tonal-note"),n=require("tonal-interval"),t=require("tonal-array"),e=function(t){return(0,r.chroma)(t)||(0,n.chroma)(t)||0},u=function(r){return parseInt(i(r),2)},o=function(r){return r.replace(/0/g,"").length};function i(r){if(l(r))return r;if(!Array.isArray(r))return"";var n=[0,0,0,0,0,0,0,0,0,0,0,0];return r.map(e).forEach(function(r){n[r]=1}),n.join("")}var c=null;function a(r){return c=c||(0,t.range)(2048,4095).map(function(r){return r.toString(2)}),"number"==typeof r?c.filter(function(n){return o(n)===r}):c.slice()}function f(r,n){n=!1!==n;var e=i(r).split("");return(0,t.compact)(e.map(function(r,u){var o=(0,t.rotate)(u,e);return n&&"0"===o[0]?null:o.join("")}))}var s=/^[01]{12}$/;function l(r){return s.test(r)}var p="1P 2m 2M 3m 3M 4P 5d 5P 6m 6M 7m 7M".split(" ");function m(r){return l(r)?(0,t.compact)(r.split("").map(function(r,n){return"1"===r?p[n]:null})):[]}function h(r,n){return 1===arguments.length?function(n){return h(r,n)}:i(r)===i(n)}function x(r,n){return arguments.length>1?x(r)(n):(r=u(r),function(n){return(n=u(n))!==r&&(n&r)===n})}function v(r,n){return arguments.length>1?v(r)(n):(r=u(r),function(n){return(n=u(n))!==r&&(n|r)===n})}function g(r,n){return arguments.length>1?g(r)(n):(r=i(r),function(n){return"1"===r[e(n)]})}function d(r,n){return 1===arguments.length?function(n){return d(r,n)}:n.filter(g(r))}
},{"tonal-note":"jCwb","tonal-interval":"/sxS","tonal-array":"6i0t"}],"wM2I":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pcset=exports.chord=exports.scale=exports.combine=exports.dictionary=void 0;var e=n(require("./data/scales.json")),r=n(require("./data/chords.json")),t=require("tonal-pcset");function n(e){return e&&e.__esModule?e:{default:e}}var o=function(e){var r=Object.keys(e).sort(),n=[],o=[],s=function(e,r,t){n[e]=r,o[t]=o[t]||[],o[t].push(e)};r.forEach(function(r){var n=e[r][0].split(" "),o=e[r][1],c=(0,t.chroma)(n);s(r,n,c),o&&o.forEach(function(e){return s(e,n,c)})});var c=Object.keys(n).sort(),a=function(e){return n[e]};return a.names=function(e){return"string"==typeof e?(o[e]||[]).slice():(!0===e?c:r).slice()},a};exports.dictionary=o;var s=function(e,r){var t=function(t){return e(t)||r(t)};return t.names=function(t){return e.names(t).concat(r.names(t))},t};exports.combine=s;var c=o(e.default);exports.scale=c;var a=o(r.default);exports.chord=a;var u=s(c,a);exports.pcset=u;
},{"./data/scales.json":"wrJo","./data/chords.json":"XmRp","tonal-pcset":"c4NH"}],"0YZh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.notes=p,exports.exists=f,exports.tokenize=m,exports.subsets=exports.supersets=exports.toScale=exports.chords=exports.modeNames=exports.intervals=exports.names=exports.props=void 0;var e=require("tonal-note"),r=require("tonal-pcset"),t=require("tonal-distance"),n=require("tonal-dictionary"),s=require("tonal-array"),a=Object.freeze({name:null,intervals:[],names:[],chroma:null,setnum:null}),o=function(e){var t=(0,n.scale)(e);if(!t)return a;var s={intervals:t,name:e};return s.chroma=(0,r.chroma)(t),s.setnum=parseInt(s.chroma,2),s.names=n.scale.names(s.chroma),Object.freeze(s)},u=function(e,r){return function(t){return r[t]||(r[t]=e(t))}},i=u(o,{});exports.props=i;var c=n.scale.names;exports.names=c;var l=function(e){var r=m(e);return i(r[1]).intervals};function p(e,r){var n=m(e);return r=r||n[1],l(r).map((0,t.transpose)(n[0]))}function f(e){var r=m(e);return void 0!==(0,n.scale)(r[1])}function m(r){if("string"!=typeof r)return["",""];var t=r.indexOf(" "),n=(0,e.name)(r.substring(0,t))||(0,e.name)(r)||"",s=""!==n?r.substring(n.length+1):r;return[n,s.length?s:""]}exports.intervals=l;var v=function(e){var t=l(e),s=p(e);return(0,r.modes)(t).map(function(e,r){var a=n.scale.names(e)[0];if(a)return[s[r]||t[r],a]}).filter(function(e){return e})};exports.modeNames=v;var x=function(e){var t=(0,r.isSubsetOf)(l(e));return n.chord.names().filter(function(e){return t((0,n.chord)(e))})};exports.chords=x;var d=function(r){var t=(0,s.compact)(r.map(e.pc));if(!t.length)return t;var n=t[0],a=(0,s.unique)(t);return(0,s.rotate)(a.indexOf(n),a)};exports.toScale=d;var h=function(e){if(!l(e).length)return[];var t=(0,r.isSupersetOf)(l(e));return n.scale.names().filter(function(e){return t((0,n.scale)(e))})};exports.supersets=h;var b=function(e){var t=(0,r.isSubsetOf)(l(e));return n.scale.names().filter(function(e){return t((0,n.scale)(e))})};exports.subsets=b;
},{"tonal-note":"jCwb","tonal-pcset":"c4NH","tonal-distance":"WV7l","tonal-dictionary":"wM2I","tonal-array":"6i0t"}],"KRkk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.notes=p,exports.tokenize=x,exports.subsets=exports.supersets=exports.exists=exports.intervals=exports.props=exports.names=void 0;var r=require("tonal-note"),e=require("tonal-distance"),t=require("tonal-dictionary"),n=require("tonal-pcset"),s=t.chord.names;exports.names=s;var o=Object.freeze({name:null,names:[],intervals:[],chroma:null,setnum:null}),a=function(r){var e=(0,t.chord)(r);if(!e)return o;var s={intervals:e,name:r};return s.chroma=(0,n.chroma)(e),s.setnum=parseInt(s.chroma,2),s.names=t.chord.names(s.chroma),s},u=function(r,e){return void 0===e&&(e={}),function(t){return e[t]||(e[t]=r(t))}},i=u(a);exports.props=i;var c=function(r){return i(x(r)[1]).intervals};function p(r,t){var n=x(r);return t=t||n[1],i(t).intervals.map((0,e.transpose)(n[0]))}exports.intervals=c;var v=function(r){return void 0!==(0,t.chord)(x(r)[1])};exports.exists=v;var l=function(r){if(!c(r).length)return[];var e=(0,n.isSupersetOf)(c(r));return t.chord.names().filter(function(r){return e((0,t.chord)(r))})};exports.supersets=l;var f=function(r){var e=(0,n.isSubsetOf)(c(r));return t.chord.names().filter(function(r){return e((0,t.chord)(r))})};exports.subsets=f;var m=/^(6|64|7|9|11|13)$/;function x(e){var t=(0,r.tokenize)(e);return""===t[0]?["",e]:"A"===t[0]&&"ug"===t[3]?["","aug"]:m.test(t[2])?[t[0]+t[1],t[2]+t[3]]:[t[0]+t[1]+t[2],t[3]]}
},{"tonal-note":"jCwb","tonal-distance":"WV7l","tonal-dictionary":"wM2I","tonal-pcset":"c4NH"}],"CKYD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PcSet=exports.Chord=exports.Scale=exports.Dictionary=exports.Distance=exports.Interval=exports.Note=exports.Array=exports.scale=exports.chord=exports.freq=exports.midi=exports.note=exports.interval=exports.transpose=void 0;var e=i(require("tonal-array"));exports.Array=e;var r=i(require("tonal-note"));exports.Note=r;var t=i(require("tonal-interval"));exports.Interval=t;var o=i(require("tonal-distance"));exports.Distance=o;var s=i(require("tonal-dictionary"));exports.Dictionary=s;var a=i(require("tonal-scale"));exports.Scale=a;var p=i(require("tonal-chord"));exports.Chord=p;var n=i(require("tonal-pcset"));function i(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,t):{};o.get||o.set?Object.defineProperty(r,t,o):r[t]=e[t]}return r.default=e,r}exports.PcSet=n;const c=o.transpose;exports.transpose=c;const x=o.interval;exports.interval=x;const l=r.props;exports.note=l;const v=r.midi;exports.midi=v;const d=r.freq;exports.freq=d;const u=s.chord;exports.chord=u;const y=s.scale;exports.scale=y;
},{"tonal-array":"6i0t","tonal-note":"jCwb","tonal-interval":"/sxS","tonal-distance":"WV7l","tonal-dictionary":"wM2I","tonal-scale":"0YZh","tonal-chord":"KRkk","tonal-pcset":"c4NH"}],"eyOc":[function(require,module,exports) {
"use strict";function e(e){return e>64&&e<91?e-65:e>96&&e<123?e-71:e>47&&e<58?e+4:43===e?62:47===e?63:0}function r(r,t){for(var n,o,c=r.replace(/[^A-Za-z0-9\+\/]/g,""),a=c.length,i=t?Math.ceil((3*a+1>>2)/t)*t:3*a+1>>2,u=new Uint8Array(i),f=0,d=0,l=0;l<a;l++)if(o=3&l,f|=e(c.charCodeAt(l))<<18-6*o,3===o||a-l==1){for(n=0;n<3&&d<i;n++,d++)u[d]=f>>>(16>>>n&24)&255;f=0}return u}module.exports={decode:r};
},{}],"fi3I":[function(require,module,exports) {
"use strict";module.exports=function(r,e){return new Promise(function(o,n){var t=new XMLHttpRequest;e&&(t.responseType=e),t.open("GET",r),t.onload=function(){200===t.status?o(t.response):n(Error(t.statusText))},t.onerror=function(){n(Error("Network Error"))},t.send()})};
},{}],"N3fU":[function(require,module,exports) {
"use strict";var n=require("./base64"),r=require("./fetch");function t(n){return function(r){return"string"==typeof r&&n.test(r)}}function e(n,r){return"string"==typeof n?n+r:"function"==typeof n?n(r):r}function o(n,r,t,e){var o=u(r)?f:i(r)?c:a(r)?d:s(r)?l:v(r)?m:p(r)?y:h(r)?x:O(r)?j:null;return o?o(n,r,t||{}):e?Promise.resolve(e):Promise.reject("Source not valid ("+r+")")}function u(n){return n instanceof ArrayBuffer}function f(n,r,t){return new Promise(function(t,e){n.decodeAudioData(r,function(n){t(n)},function(){e("Can't decode audio data ("+r.slice(0,30)+"...)")})})}o.fetch=r;var i=t(/\.(mp3|wav|ogg)(\?.*)?$/i);function c(n,r,t){var u=e(t.from,r);return o(n,o.fetch(u,"arraybuffer"),t)}function a(n){return n&&"function"==typeof n.then}function d(n,r,t){return r.then(function(r){return o(n,r,t)})}var s=Array.isArray;function l(n,r,t){return Promise.all(r.map(function(r){return o(n,r,t,r)}))}function v(n){return n&&"object"==typeof n}function m(n,r,t){var e={},u=Object.keys(r).map(function(u){if(t.only&&-1===t.only.indexOf(u))return null;var f=r[u];return o(n,f,t,f).then(function(n){e[u]=n})});return Promise.all(u).then(function(){return e})}var p=t(/\.json(\?.*)?$/i);function y(n,r,t){var u=e(t.from,r);return o(n,o.fetch(u,"text").then(JSON.parse),t)}var h=t(/^data:audio/);function x(r,t,e){var u=t.indexOf(",");return o(r,n.decode(t.slice(u+1)).buffer,e)}var O=t(/\.js(\?.*)?$/i);function j(n,r,t){var u=e(t.from,r);return o(n,o.fetch(u,"text").then(w),t)}function w(n){var r=n.indexOf("MIDI.Soundfont.");if(r<0)throw Error("Invalid MIDI.js Soundfont format");r=n.indexOf("=",r)+2;var t=n.lastIndexOf(",");return JSON.parse(n.slice(r,t)+"}")}"object"==typeof module&&module.exports&&(module.exports=o),"undefined"!=typeof window&&(window.loadAudio=o);
},{"./base64":"eyOc","./fetch":"fi3I"}],"V9nu":[function(require,module,exports) {
function e(e){var a=e.createGain(),r=a._voltage=i(e),l=n(r),s=n(r),u=n(r);return a._startAmount=n(s),a._endAmount=n(u),a._multiplier=n(l),a._multiplier.connect(a),a._startAmount.connect(a),a._endAmount.connect(a),a.value=l.gain,a.startValue=s.gain,a.endValue=u.gain,a.startValue.value=0,a.endValue.value=0,Object.defineProperties(a,t),a}module.exports=e;var t={attack:{value:0,writable:!0},decay:{value:0,writable:!0},sustain:{value:1,writable:!0},release:{value:0,writable:!0},getReleaseDuration:{value:function(){return this.release}},start:{value:function(e){var t=this._multiplier.gain,a=this._startAmount.gain,i=this._endAmount.gain;this._voltage.start(e),this._decayFrom=this._decayFrom=e+this.attack,this._startedAt=e;var n=this.sustain;t.cancelScheduledValues(e),a.cancelScheduledValues(e),i.cancelScheduledValues(e),i.setValueAtTime(0,e),this.attack?(t.setValueAtTime(0,e),t.linearRampToValueAtTime(1,e+this.attack),a.setValueAtTime(1,e),a.linearRampToValueAtTime(0,e+this.attack)):(t.setValueAtTime(1,e),a.setValueAtTime(0,e)),this.decay&&t.setTargetAtTime(n,this._decayFrom,r(this.decay))}},stop:{value:function(e,t){t&&(e-=this.release);var a=e+this.release;if(this.release){var i=this._multiplier.gain,n=this._startAmount.gain,s=this._endAmount.gain;i.cancelScheduledValues(e),n.cancelScheduledValues(e),s.cancelScheduledValues(e);var u=r(this.release);if(this.attack&&e<this._decayFrom){var c=l(0,1,this._startedAt,this._decayFrom,e);i.linearRampToValueAtTime(c,e),n.linearRampToValueAtTime(1-c,e),n.setTargetAtTime(0,e,u)}s.setTargetAtTime(1,e,u),i.setTargetAtTime(0,e,u)}return this._voltage.stop(a),a}},onended:{get:function(){return this._voltage.onended},set:function(e){this._voltage.onended=e}}},a=new Float32Array([1,1]);function i(e){var t=e.createBufferSource(),i=e.createBuffer(1,2,e.sampleRate);return i.getChannelData(0).set(a),t.buffer=i,t.loop=!0,t}function n(e){var t=e.context.createGain();return e.connect(t),t}function r(e){return Math.log(e+1)/Math.log(100)}function l(e,t,a,i,n){var r=e+(n-a)/(i-a)*(t-e);return r<=e&&(r=e),r>=t&&(r=t),r}
},{}],"qnQW":[function(require,module,exports) {
"use strict";var n=require("adsr"),e={},t={gain:1,attack:.01,decay:.1,sustain:.9,release:.3,loop:!1,cents:0,loopStart:0,loopEnd:0};function r(n,r,o){var a=!1,i=0,s={},f=n.createGain();f.gain.value=1;var l=Object.assign({},t,o),d={context:n,out:f,opts:l};return r instanceof AudioBuffer?d.buffer=r:d.buffers=r,d.start=function(t,r,o){if(d.buffer&&null!==t)return d.start(null,t,r);var u=t?d.buffers[t]:d.buffer;if(u){if(a){var c=o||e;r=Math.max(n.currentTime,r||0),d.emit("start",r,t,c);var f=p(t,u,c);return f.id=function(e,t){return t.id=i++,s[t.id]=t,t.source.onended=function(){var e=n.currentTime;t.source.disconnect(),t.env.disconnect(),t.disconnect(),d.emit("ended",e,t.id,t)},t.id}(0,f),f.env.start(r),f.source.start(r),d.emit("started",r,f.id,f),c.duration&&f.stop(r+c.duration),f}console.warn("SamplePlayer not connected to any node.")}else console.warn("Buffer "+t+" not found.")},d.play=function(n,e,t){return d.start(n,e,t)},d.stop=function(n,e){var t;return(e=e||Object.keys(s)).map(function(e){return(t=s[e])?(t.stop(n),t.id):null})},d.connect=function(n){return a=!0,f.connect(n),d},d.emit=function(n,e,t,r){d.onevent&&d.onevent(n,e,t,r);var o=d["on"+n];o&&o(e,t,r)},d;function p(e,t,r){var o=n.createGain();return o.gain.value=0,o.connect(f),o.env=u(n,r,l),o.env.connect(o.gain),o.source=n.createBufferSource(),o.source.buffer=t,o.source.connect(o),o.source.loop=r.loop||l.loop,o.source.playbackRate.value=c(r.cents||l.cents),o.source.loopStart=r.loopStart||l.loopStart,o.source.loopEnd=r.loopEnd||l.loopEnd,o.stop=function(t){var r=t||n.currentTime;d.emit("stop",r,e);var a=o.env.stop(r);o.source.stop(a)},o}}function o(n){return"number"==typeof n}var a=["attack","decay","sustain","release"];function u(e,t,r){var u=n(e),c=t.adsr||r.adsr;return a.forEach(function(n,e){u[n]=c?c[e]:t[n]||r[n]}),u.value.value=o(t.gain)?t.gain:o(r.gain)?r.gain:1,u}function c(n){return n?Math.pow(2,n/1200):1}module.exports=r;
},{"adsr":"V9nu"}],"7F/x":[function(require,module,exports) {
function n(n,t){return function(o,e,r,u){n(o,e,r,u),t(o,e,r,u)}}module.exports=function(t){return t.on=function(o,e){if(1===arguments.length&&"function"==typeof o)return t.on("event",o);var r="on"+o,u=t[r];return t[r]=u?n(u,e):e,t},t};
},{}],"F0Ue":[function(require,module,exports) {
"use strict";var t=/^([a-gA-G])(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)\s*$/;function r(){return t}var e=[0,2,4,5,7,9,11];function c(r,c,n){if("string"!=typeof r)return null;var o=t.exec(r);if(!o||!c&&o[4])return null;var i={letter:o[1].toUpperCase(),acc:o[2].replace(/x/g,"##")};return i.pc=i.letter+i.acc,i.step=(i.letter.charCodeAt(0)+3)%7,i.alt="b"===i.acc[0]?-i.acc.length:i.acc.length,i.chroma=e[i.step]+i.alt,o[3]&&(i.oct=+o[3],i.midi=i.chroma+12*(i.oct+1),i.freq=a(i.midi,n)),c&&(i.tonicOf=o[4]),i}function a(t,r){return Math.pow(2,(t-69)/12)*(r||440)}var n={parse:c,regex:r,midiToFreq:a},o=["letter","acc","pc","step","alt","chroma","oct","midi","freq"];o.forEach(function(t){n[t]=function(r){var e=c(r);return e&&void 0!==e[t]?e[t]:null}}),module.exports=n;
},{}],"znvM":[function(require,module,exports) {
"use strict";var r=require("note-parser"),t=function(r){return null!==r&&r!==[]&&r>=0&&r<129},n=function(n){return t(n)?+n:r.midi(n)};function e(r,t){return Object.keys(r).reduce(function(n,e){return n[t(e)]=r[e],n},{})}module.exports=function(r){if(r.buffers){var t=r.opts.map,u="function"==typeof t?t:n,f=function(r){return r?u(r)||r:null};r.buffers=e(r.buffers,f);var o=r.start;r.start=function(r,t,n){var e=f(r),u=e%1;return u&&(e=Math.floor(e),n=Object.assign(n||{},{cents:Math.floor(100*u)})),o(e,t,n)}}return r};
},{"note-parser":"F0Ue"}],"3X3A":[function(require,module,exports) {
"use strict";var e=Array.isArray,t=function(e){return e&&"object"==typeof e},r={};module.exports=function(n){return n.schedule=function(u,i){var c,o,a,l,m=n.context.currentTime,s=u<m?m:u;return n.emit("schedule",s,i),i.map(function(u){return u?(e(u)?(c=u[0],o=u[1]):(c=u.time,o=u),t(o)?(a=o.name||o.key||o.note||o.midi||null,l=o):(a=o,l=r),n.start(a,s+(c||0),l)):null})},n};
},{}],"ZBEn":[function(require,module,exports) {
var define;
var global = arguments[3];
var e,t=arguments[3];!function(s){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=s();else if("function"==typeof e&&e.amd)e([],s);else{("undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:this).midimessage=s()}}(function(){return function e(t,s,o){function a(n,i){if(!s[n]){if(!t[n]){var l="function"==typeof require&&require;if(!i&&l)return l(n,!0);if(r)return r(n,!0);var h=new Error("Cannot find module '"+n+"'");throw h.code="MODULE_NOT_FOUND",h}var c=s[n]={exports:{}};t[n][0].call(c.exports,function(e){var s=t[n][1][e];return a(s||e)},c,c.exports,e,t,s,o)}return s[n].exports}for(var r="function"==typeof require&&require,n=0;n<o.length;n++)a(o[n]);return a}({1:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=function(e){return new function(e){if(this._event=e,this._data=e.data,this.receivedTime=e.receivedTime,this._data&&this._data.length<2)console.warn("Illegal MIDI message of length",this._data.length);else switch(this._messageCode=240&e.data[0],this.channel=15&e.data[0],this._messageCode){case 128:this.messageType="noteoff",this.key=127&e.data[1],this.velocity=127&e.data[2];break;case 144:this.messageType="noteon",this.key=127&e.data[1],this.velocity=127&e.data[2];break;case 160:this.messageType="keypressure",this.key=127&e.data[1],this.pressure=127&e.data[2];break;case 176:this.messageType="controlchange",this.controllerNumber=127&e.data[1],this.controllerValue=127&e.data[2],120===this.controllerNumber&&0===this.controllerValue?this.channelModeMessage="allsoundoff":121===this.controllerNumber?this.channelModeMessage="resetallcontrollers":122===this.controllerNumber?0===this.controllerValue?this.channelModeMessage="localcontroloff":this.channelModeMessage="localcontrolon":123===this.controllerNumber&&0===this.controllerValue?this.channelModeMessage="allnotesoff":124===this.controllerNumber&&0===this.controllerValue?this.channelModeMessage="omnimodeoff":125===this.controllerNumber&&0===this.controllerValue?this.channelModeMessage="omnimodeon":126===this.controllerNumber?this.channelModeMessage="monomodeon":127===this.controllerNumber&&(this.channelModeMessage="polymodeon");break;case 192:this.messageType="programchange",this.program=e.data[1];break;case 208:this.messageType="channelpressure",this.pressure=127&e.data[1];break;case 224:this.messageType="pitchbendchange";var t=127&e.data[2],s=127&e.data[1];this.pitchBend=(t<<8)+s}}(e)},t.exports=s.default},{}]},{},[1])(1)});
},{}],"qT50":[function(require,module,exports) {
var e=require("midimessage");module.exports=function(n){return n.listenToMidi=function(o,a){var i={},s=a||{},t=s.gain||function(e){return e/127};return o.onmidimessage=function(o){var a=o.messageType?o:e(o);if("noteon"===a.messageType&&0===a.velocity&&(a.messageType="noteoff"),!s.channel||a.channel===s.channel)switch(a.messageType){case"noteon":i[a.key]=n.play(a.key,0,{gain:t(a.velocity)});break;case"noteoff":i[a.key]&&(i[a.key].stop(),delete i[a.key])}},n},n};
},{"midimessage":"ZBEn"}],"LxcV":[function(require,module,exports) {
"use strict";var e=require("./player"),r=require("./events"),u=require("./notes"),i=require("./scheduler"),o=require("./midi");function t(t,d,n){return o(i(u(r(e(t,d,n)))))}"object"==typeof module&&module.exports&&(module.exports=t),"undefined"!=typeof window&&(window.SamplePlayer=t);
},{"./player":"qnQW","./events":"7F/x","./notes":"znvM","./scheduler":"3X3A","./midi":"qT50"}],"gjLe":[function(require,module,exports) {
"use strict";function t(t,r){return Array(r+1).join(t)}function r(t){return"number"==typeof t}function e(t){return"string"==typeof t}function n(t){return void 0!==t}function u(t,r){return Math.pow(2,(t-69)/12)*(r||440)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.regex=o,exports.parse=a,exports.build=s,exports.midi=x,exports.freq=d,exports.letter=v,exports.acc=m,exports.pc=h,exports.step=g,exports.alt=b,exports.chroma=y,exports.oct=A;var c=/^([a-gA-G])(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)\s*$/;function o(){return c}var i=[0,2,4,5,7,9,11];function a(t,r,e){if("string"!=typeof t)return null;var n=c.exec(t);if(!n||!r&&n[4])return null;var o={letter:n[1].toUpperCase(),acc:n[2].replace(/x/g,"##")};o.pc=o.letter+o.acc,o.step=(o.letter.charCodeAt(0)+3)%7,o.alt="b"===o.acc[0]?-o.acc.length:o.acc.length;var a=i[o.step]+o.alt;return o.chroma=a<0?12+a:a%12,n[3]&&(o.oct=+n[3],o.midi=a+12*(o.oct+1),o.freq=u(o.midi,e)),r&&(o.tonicOf=n[4]),o}var l="CDEFGAB";function p(e){return r(e)?e<0?t("b",-e):t("#",e):""}function f(t){return r(t)?""+t:""}function s(t,r,e){return null==t?null:t.step?s(t.step,t.alt,t.oct):t<0||t>6?null:l.charAt(t)+p(r)+f(e)}function x(t){if((r(t)||e(t))&&t>=0&&t<128)return+t;var u=a(t);return u&&n(u.midi)?u.midi:null}function d(t,r){var e=x(t);return null===e?null:u(e,r)}function v(t){return(a(t)||{}).letter}function m(t){return(a(t)||{}).acc}function h(t){return(a(t)||{}).pc}function g(t){return(a(t)||{}).step}function b(t){return(a(t)||{}).alt}function y(t){return(a(t)||{}).chroma}function A(t){return(a(t)||{}).oct}
},{}],"EfkE":[function(require,module,exports) {
"use strict";var n=require("note-parser");function e(n,t){if(console.warn("new Soundfont() is deprected"),console.log("Please use Soundfont.instrument() instead of new Soundfont().instrument()"),!(this instanceof e))return new e(n);this.nameToUrl=t||e.nameToUrl,this.ctx=n,this.instruments={},this.promises=[]}function t(n,t,o){return console.warn("Soundfont.loadBuffers is deprecate."),console.log("Use Soundfont.instrument(..) and get buffers properties from the result."),e.instrument(n,t,o).then(function(n){return n.buffers})}function o(e,t){return t=t||{},function(o,s,r,i){console.warn("The oscillator player is deprecated."),console.log("Starting with version 0.9.0 you will have to wait until the soundfont is loaded to play sounds.");var u=o>0&&o<129?+o:n.midi(o),a=u?n.midiToFreq(u,440):null;if(a){r=r||.2;var d=(i=i||{}).destination||t.destination||e.destination,l=i.vcoType||t.vcoType||"sine",c=i.gain||t.gain||.4,f=e.createOscillator();f.type=l,f.frequency.value=a;var m=e.createGain();return m.gain.value=c,f.connect(m),m.connect(d),f.start(s),r>0&&f.stop(s+r),f}}}e.prototype.onready=function(n){console.warn("deprecated API"),console.log("Please use Promise.all(Soundfont.instrument(), Soundfont.instrument()).then() instead of new Soundfont().onready()"),Promise.all(this.promises).then(n)},e.prototype.instrument=function(n,t){console.warn("new Soundfont().instrument() is deprecated."),console.log("Please use Soundfont.instrument() instead.");var s=this.ctx;if((n=n||"default")in this.instruments)return this.instruments[n];var r={name:n,play:o(s,t)};if(this.instruments[n]=r,"default"!==n){var i=e.instrument(s,n,t).then(function(n){return r.play=n.play,r});this.promises.push(i),r.onready=function(n){console.warn("onready is deprecated. Use Soundfont.instrument().then()"),i.then(n)}}else r.onready=function(n){console.warn("onready is deprecated. Use Soundfont.instrument().then()"),n()};return r},e.loadBuffers=t,e.noteToMidi=n.midi,module.exports=e;
},{"note-parser":"gjLe"}],"aw+B":[function(require,module,exports) {
"use strict";var n=require("audio-loader"),t=require("sample-player");function e(i,u,s){if(1===arguments.length)return function(n,t){return e(i,n,t)};var d=s||{},a=d.isSoundfontURL||o,l=d.nameToUrl||r,f=a(u)?u:l(u,d.soundfont,d.format);return n(i,f,{only:d.only||d.notes}).then(function(n){var e=t(i,n,d).connect(d.destination?d.destination:i.destination);return e.url=f,e.name=u,e})}function o(n){return/\.js(\?.*)?$/i.test(n)}function r(n,t,e){return"https://gleitz.github.io/midi-js-soundfonts/"+(t="FluidR3_GM"===t?t:"MusyngKite")+"/"+n+"-"+(e="ogg"===e?e:"mp3")+".js"}var i=require("./legacy");i.instrument=e,i.nameToUrl=r,"object"==typeof module&&module.exports&&(module.exports=i),"undefined"!=typeof window&&(window.Soundfont=i);
},{"audio-loader":"N3fU","sample-player":"LxcV","./legacy":"EfkE"}],"aHC3":[function(require,module,exports) {
"use strict";var t=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(exports,"__esModule",{value:!0});var e=require("tonal"),n=t(require("soundfont-player")),r=require("./math"),o=window;o.AudioContext=o.AudioContext||o.webkitAudioContext;var u=new AudioContext,i={};function a(t){n.instrument(u,t,{soundfont:"FluidR3_GM"}).then(function(e){i[t]=e})}function l(t,n,o,u){return Array.prototype.concat.apply([],r.range(u-o+1).map(function(r){return e.scale(t).map(e.transpose("".concat(n).concat(o+r))).filter(function(t,e){return e%2==0})}))}function s(t,e,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(null!=u){var a=i[t];null!=a&&r.range(o).forEach(function(t){var r=t+n;r<0||r>=e.length||a.play(e[r],u.currentTime+.1)})}}function c(){null!=u&&"suspended"===u.state&&u.resume()}exports.loadInstrument=a,exports.getNotes=l,exports.play=s,exports.resumeAudioContext=c;
},{"tonal":"CKYD","soundfont-player":"aw+B","./math":"pR4u"}],"7QCb":[function(require,module,exports) {
"use strict";var e=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(exports,"__esModule",{value:!0});var t,r=require("../.."),n=require("../util/canvas/actor"),a=require("../util/game"),o=e(require("../util/canvas/screen")),i=e(require("../util/canvas/text")),s=e(require("../util/pointer")),d=e(require("../util/sound")),c=0,u=300;function l(e,t,n){p(e,"black",.04,t,n),e.addUpdater(function(){e.getCollidings(g).forEach(function(t){t.remove();var n=e.pool.get(l).length;c+=n;for(var a=0;a<Math.min(n,3);a++)r.spawn(g);r.spawn(l,e.pos.x,e.pos.y),r.spawn(f)})})}function f(e){p(e,"coral",.02),e.addUpdater(function(){e.getCollidings(l).forEach(function(e){e.remove()})})}function p(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1;if(e.setRect(5,5,{color:t}),e.addRectWithSquares(10,3,{offset:{x:-4},color:t}),n>=0)e.pos.set(n,o);else{for(var i=!1,d=0;d<9;d++){e.pos.set(a.random.get(99),a.random.get(99));var c=e.getNearest(l);if(!1===c||c.pos.distanceTo(e.pos)>30){i=!0;break}}if(!i)return void e.remove()}e.angle=a.random.get(2*Math.PI),e.addUpdater(function(){e.angle+=r,e.speed+=.07*(.1-e.speed),s.isJustPressed&&(e.speed=2),e.pos.wrap(0,99,0,99)})}function g(e){e.addRectWithSquares(10,5,{color:"GreenYellow"}),e.addRectWithSquares(5,10,{color:"GreenYellow"});for(var t=!1,r=0;r<9;r++){e.pos.set(a.random.get(99),a.random.get(99));var n=e.getNearest(l);if(!1===n||n.pos.distanceTo(e.pos)>30){t=!0;break}}t?e.addUpdater(function(){e.angle+=.1}):e.remove()}a.init({game:function(){r.reset(),c=0,r.spawn(l,50,50),r.spawn(g),r.addUpdater(function(){i.draw("".concat(c),1,1,{align:"left"}),u>0&&(i.draw("[CLICK][TAP]\nMOVE FORWARD",5,10,{align:"left"}),u--),r.pool.get(l).length<=0&&a.endGame()})},gameOver:function(){t=r.addUpdater(function(){i.draw("GAME OVER",50,45)})},title:function(){null!=t&&t.remove(),r.addUpdater(function(){i.draw("TADPOLE",50,32,{scale:2}),a.ticks%60<30&&i.draw("CLICK OR TAP\nTO START",50,75)})},init:function(){document.title="TADPOLE"},screen:o,actorClass:n.Actor,onPointerUp:d.resumeAudioContext});
},{"../..":"qYDV","../util/canvas/actor":"N8kj","../util/game":"Cmo+","../util/canvas/screen":"Omv8","../util/canvas/text":"X6AO","../util/pointer":"iUdv","../util/sound":"aHC3"}]},{},["7QCb"], null)